<!-- virtual-scroll.html -->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FEEBEA - 虚拟无缝滚动</title>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #2a2a2a 100%);
      color: #feebea;
      font-family: "Dancing Script", cursive;
    }
    #virtual-scroll-container {
      position: relative;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      touch-action: pan-y;
      user-select: none;
    }
    .v-section {
      position: absolute;
      left: 0;
      width: 100vw;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.4s cubic-bezier(.4,0,.2,1);
      will-change: transform;
      background: transparent;
    }
    /* 隐藏滚动条 */
    #virtual-scroll-container::-webkit-scrollbar { display: none; }
    #virtual-scroll-container { scrollbar-width: none; -ms-overflow-style: none; }
    /* 示例内容样式 */
    .section-content {
      width: 90vw;
      max-width: 900px;
      margin: 0 auto;
      background: rgba(254,235,234,0.03);
      border-radius: 20px;
      box-shadow: 0 0 30px rgba(254,235,234,0.08);
      padding: 2rem 1rem;
      text-align: center;
      font-size: 2rem;
      min-height: 60vh;
      color: #feebea;
      user-select: text;
    }
    .section-title {
      font-size: 2.5rem;
      font-family: "Great Vibes", cursive;
      margin-bottom: 1rem;
      color: #feebea;
    }
    @media (max-width: 600px) {
      .section-content { font-size: 1.1rem; padding: 1rem 0.5rem; }
      .section-title { font-size: 1.5rem; }
    }
  </style>
</head>
<body>
  <div id="virtual-scroll-container">
    <div class="v-section" id="section0"></div>
    <div class="v-section" id="section1"></div>
    <div class="v-section" id="section2"></div>
  </div>
  <script>
    // 1. 定义所有页面内容（可自定义为你的header/color/quote/meditation/essence/phoebe等）
    const sections = [
      {
        title: "Feebea",
        html: `<div class="section-title">Feebea</div>
               <div>To Those I Love</div>`
      },
      {
        title: "Color",
        html: `<div class="section-title">#feebea</div>
               <div style="margin:2rem auto;">
                 <div style="width:120px;height:120px;border-radius:50%;background:#feebea;box-shadow:0 0 40px #feebea;"></div>
               </div>
               <div>rgb(254,235,234) / hsl(3,91%,96%)</div>`
      },
      {
        title: "Quote",
        html: `<div class="section-title">Zima Blue</div>
               <div>"My search for truth is finished at last. I'm going home."</div>`
      },
      {
        title: "Meditation",
        html: `<div class="section-title">Meditation</div>
               <div style="font-size:1.2rem;line-height:1.7;">
                 Sometimes, it's difficult even for me to understand what I've become...<br>
                 My search for truth is finished at last. I'm going home.
               </div>`
      },
      {
        title: "Essence",
        html: `<div class="section-title">Essence</div>
               <div>Life is a beautiful robe crawling with lice<br><span style="font-size:1rem;">— Zhang Ailing</span></div>`
      },
      {
        title: "Phoebe",
        html: `<div class="section-title">Phoebe's Wisdom</div>
               <div>"NO, YOU ARE THE BOSS OF YOU!"</div>`
      }
    ];
    const sectionCount = sections.length;

    // 2. 虚拟滚动核心变量
    let currentIndex = 0; // 当前section索引

    // 3. 渲染3个section
    function renderSections() {
      for (let i = -1; i <= 1; i++) {
        const idx = (currentIndex + i + sectionCount) % sectionCount;
        const section = document.getElementById('section' + (i + 1));
        section.innerHTML = `<div class="section-content">${sections[idx].html}</div>`;
        section.style.transform = `translateY(${i * 100}vh)`;
      }
    }
    renderSections();

    // 4. 交互：支持鼠标拖拽和触摸滑动
    const container = document.getElementById('virtual-scroll-container');
    let startY = 0, lastY = 0, isDragging = false;

    function onStart(e) {
      isDragging = true;
      startY = (e.touches ? e.touches[0].clientY : e.clientY);
      lastY = 0;
    }
    function onMove(e) {
      if (!isDragging) return;
      const y = (e.touches ? e.touches[0].clientY : e.clientY);
      const deltaY = y - startY;
      lastY = deltaY;
      for (let i = -1; i <= 1; i++) {
        const section = document.getElementById('section' + (i + 1));
        section.style.transform = `translateY(${i * 100 + deltaY / window.innerHeight * 100}vh)`;
      }
      e.preventDefault();
    }
    function onEnd() {
      if (!isDragging) return;
      isDragging = false;
      if (lastY > window.innerHeight / 4) {
        // 下滑，上一页
        currentIndex = (currentIndex - 1 + sectionCount) % sectionCount;
      } else if (lastY < -window.innerHeight / 4) {
        // 上滑，下一页
        currentIndex = (currentIndex + 1) % sectionCount;
      }
      renderSections();
    }
    container.addEventListener('mousedown', onStart);
    container.addEventListener('mousemove', onMove);
    container.addEventListener('mouseup', onEnd);
    container.addEventListener('mouseleave', onEnd);
    container.addEventListener('touchstart', onStart, { passive: false });
    container.addEventListener('touchmove', onMove, { passive: false });
    container.addEventListener('touchend', onEnd);

    // 禁止文本选中和拖拽
    container.addEventListener('dragstart', e => e.preventDefault());
    container.addEventListener('selectstart', e => e.preventDefault());
  </script>
</body>
</html>
