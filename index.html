<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>FEEBEA - A Color Story</title>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;600;700&family=Pacifico&family=Great+Vibes&family=Cinzel:wght@400;600&family=Zhi+Mang+Xing&family=Long+Cang&family=Noto+Serif+SC:wght@400;600;700&display=swap"
            rel="stylesheet"
        />
        <!-- Gabriel Weiss Friends Font -->
        <link
            href="https://fonts.cdnfonts.com/css/gabriel-weiss-friends-font"
            rel="stylesheet"
        />
        <!-- Backup Friends-style font -->
        <link
            href="https://fonts.googleapis.com/css2?family=Fredoka+One:wght@400&display=swap"
            rel="stylesheet"
        />
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: "Dancing Script", cursive;
                background: linear-gradient(
                    135deg,
                    #0a0a0a 0%,
                    #1a1a1a 50%,
                    #2a2a2a 100%
                );
                min-height: 100vh;
                overflow-x: hidden;
                color: #feebea;
                transition: all 0.3s ease;
            }

            .lang-toggle {
                position: fixed;
                top: 1rem;
                left: 1rem;
                z-index: 1000;
                background: rgba(254, 235, 234, 0.1);
                border: 2px solid rgba(254, 235, 234, 0.3);
                border-radius: 25px;
                padding: 0.6rem 1.2rem;
                color: #feebea;
                font-family: "Dancing Script", cursive;
                font-size: 1rem;
                cursor: pointer;
                transition: all 0.3s ease;
                backdrop-filter: blur(10px);
            }

            .lang-toggle:hover {
                background: rgba(254, 235, 234, 0.2);
                transform: scale(1.05);
                box-shadow: 0 0 20px rgba(254, 235, 234, 0.3);
            }

            .container {
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem 1rem;
            }

            .header {
                text-align: center;
                margin-bottom: 3rem;
                animation: fadeIn 2s ease-out;
            }

            .main-title {
                font-family: "Great Vibes", cursive;
                font-size: 4rem;
                font-weight: 400;
                color: #feebea;
                text-shadow: 0 0 30px rgba(254, 235, 234, 0.3);
                margin-bottom: 1rem;
                letter-spacing: 0.05em;
            }

            .subtitle {
                font-family: "Dancing Script", cursive;
                font-size: 1.4rem;
                color: #feebea;
                font-weight: 400;
                opacity: 0.8;
                margin-bottom: 1.5rem;
            }

            .tribute {
                font-family: "Dancing Script", cursive;
                font-size: 0.9rem; /* Changed from 1rem */
                color: #feebea; /* Changed from #888 */
                font-style: italic;
                opacity: 0.6;
                transition: all 0.3s ease;
            }

            .main-title:hover {
                color: #fff;
                text-shadow: 0 0 40px rgba(254, 235, 234, 0.6);
                transform: scale(1.02);
                transition: all 0.3s ease;
            }

            .tribute:hover {
                opacity: 1;
                color: #fff;
                transform: scale(1.05);
                text-shadow: 0 0 20px rgba(254, 235, 234, 0.4);
            }

            /* Chinese fonts - keep English fonts for better appearance */
            body.chinese .tribute {
                font-family: "Dancing Script", cursive;
                font-size: 0.9rem;
            }

            body.chinese .meditation-text {
                font-family: "Dancing Script", cursive;
                font-size: 1.6rem;
                line-height: 1.8;
                color: #feebea;
                opacity: 0.9;
                max-width: 650px;
                margin: 0 auto;
                font-weight: 400;
                text-align: center;
            }

            body.chinese .essence-title {
                font-family: "Pacifico", cursive;
                font-size: clamp(0.9rem, 2.5vw, 1.3rem);
                margin-bottom: 0.5rem;
                color: #feebea;
                cursor: text;
                user-select: text;
                word-wrap: break-word;
                overflow-wrap: break-word;
                line-height: 1.2;
                max-width: 100%;
            }

            body.chinese .essence-desc {
                font-family: "Dancing Script", cursive;
                font-size: clamp(0.8rem, 2vw, 1rem);
                color: #feebea;
                opacity: 0.8;
                cursor: text;
                user-select: text;
                word-wrap: break-word;
                overflow-wrap: break-word;
                line-height: 1.1;
                max-width: 100%;
            }

            body.chinese .final-text {
                font-family: "Great Vibes", cursive;
                font-size: 2rem;
                color: #feebea;
                opacity: 0.7;
            }

            body.chinese .quote-text {
                font-family: "Cinzel", serif;
                font-size: 1.4rem;
                line-height: 1.8;
                color: #feebea;
                opacity: 0.9;
                max-width: 600px;
                margin: 0 auto 1.5rem;
                font-weight: 400;
                font-style: italic;
            }

            body.chinese .quote-author {
                font-family: "Dancing Script", cursive;
                font-size: 1.1rem;
                color: #feebea;
                opacity: 0.7;
            }

            body.chinese .phoebe-title {
                font-family: "Pacifico", cursive;
                font-size: 2rem;
                color: #feebea;
                margin-bottom: 1.5rem;
            }

            body.chinese .phoebe-quote {
                font-family: "Dancing Script", cursive;
                font-size: 1.3rem;
                color: #feebea;
                opacity: 0.9;
                line-height: 1.6;
                max-width: 450px;
                margin: 0 auto;
                font-style: italic;
            }

            .color-display {
                display: flex;
                justify-content: center;
                margin-bottom: 3rem;
                animation: pulse 3s infinite ease-in-out;
            }

            .color-circle {
                width: 250px;
                height: 250px;
                background: #feebea;
                border-radius: 50%;
                box-shadow:
                    0 0 60px rgba(254, 235, 234, 0.4),
                    0 0 120px rgba(254, 235, 234, 0.2),
                    inset 0 0 60px rgba(255, 255, 255, 0.1);
                position: relative;
                overflow: hidden;
                cursor: pointer;
                transition: all 0.5s ease;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .color-circle:hover {
                transform: scale(1.05);
                box-shadow:
                    0 0 80px rgba(254, 235, 234, 0.6),
                    0 0 160px rgba(254, 235, 234, 0.3);
            }

            .color-circle::before {
                content: "";
                position: absolute;
                top: -50%;
                left: -50%;
                width: 200%;
                height: 200%;
                background: linear-gradient(
                    45deg,
                    transparent,
                    rgba(255, 255, 255, 0.1),
                    transparent
                );
                animation: rotate 4s linear infinite;
                z-index: 1;
            }

            .zima-square {
                width: 12px;
                height: 12px;
                background: #5bc2e7;
                position: fixed;
                z-index: 9999;
                box-shadow: 0 0 10px rgba(91, 194, 231, 0.5);
                opacity: 0;
                animation: zimaAppear 1s ease-out forwards;
                pointer-events: none;
                border-radius: 0;
            }

            .zima-square-small {
                width: 8px;
                height: 8px;
            }

            .zima-square-large {
                width: 16px;
                height: 16px;
            }

            .zima-square-xl {
                width: 20px;
                height: 20px;
            }

            @keyframes zimaAppear {
                0% {
                    opacity: 0;
                    transform: scale(0);
                }
                100% {
                    opacity: 1;
                    transform: scale(1);
                }
            }

            .color-info {
                text-align: center;
                margin-bottom: 3rem;
            }

            .color-codes {
                display: inline-block;
                background: rgba(254, 235, 234, 0.05);
                border: 1px solid rgba(254, 235, 234, 0.2);
                border-radius: 20px;
                padding: 1.5rem;
                backdrop-filter: blur(10px);
            }

            .code-item {
                font-family: "Dancing Script", cursive;
                font-size: 1.2rem;
                margin: 0.8rem 0;
                cursor: pointer;
                transition: color 0.3s ease;
                font-weight: 600;
            }

            .code-item:hover {
                color: #fff;
                text-shadow: 0 0 10px rgba(254, 235, 234, 0.5);
            }

            .quote-section {
                text-align: center;
                margin: 4rem 0;
                padding: 2rem;
                background: rgba(254, 235, 234, 0.03);
                border: 1px solid rgba(254, 235, 234, 0.1);
                border-radius: 20px;
                backdrop-filter: blur(5px);
                animation: fadeInUp 2s ease-out 1s both;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 1rem;
                flex-wrap: wrap;
            }

            .quote-text {
                font-family: "Cinzel", serif;
                font-size: 1.4rem;
                line-height: 1.8;
                color: #feebea;
                opacity: 0.9;
                font-weight: 400;
                font-style: italic;
                margin: 0;
                flex: 1;
                min-width: 300px;
            }

            .quote-author {
                font-family: "Dancing Script", cursive;
                font-size: 1.1rem;
                color: #feebea;
                opacity: 0.7;
                margin: 0;
                white-space: nowrap;
            }

            .meditation {
                text-align: center;
                margin: 4rem 0;
                animation: fadeInUp 2s ease-out 1s both;
            }

            .meditation-text {
                font-family: "Dancing Script", cursive;
                font-size: 1.6rem;
                line-height: 1.8;
                color: #feebea;
                opacity: 0.9;
                max-width: 650px;
                margin: 0 auto;
                font-weight: 400;
                text-align: center; /* Changed from left */
            }

            .essence {
                display: flex;
                justify-content: center;
                gap: 1.2rem;
                margin: 3rem auto;
                flex-wrap: nowrap;
                overflow-x: auto;
                padding: 0 1rem;
                max-width: 900px;
            }

            .essence-card {
                background: rgba(254, 235, 234, 0.03);
                border: 1px solid rgba(254, 235, 234, 0.1);
                border-radius: 15px;
                padding: 1.3rem;
                text-align: center;
                backdrop-filter: blur(5px);
                transition: all 0.3s ease;
                cursor: pointer;
                position: relative;
                width: 270px;
                height: 180px;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                flex-shrink: 0;
                min-width: 270px;
                margin-top: 10px;
            }

            .essence-card:hover {
                background: rgba(254, 235, 234, 0.08);
                transform: translateY(-5px);
            }

            .essence-title {
                font-family: "Pacifico", cursive;
                font-size: 1.3rem;
                margin-bottom: 0.5rem;
                color: #feebea;
                cursor: text;
                user-select: text;
                word-wrap: break-word;
                overflow-wrap: break-word;
                line-height: 1.2;
                max-width: 100%;
                width: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
                text-align: center;
                overflow: hidden;
            }

            .essence-desc {
                font-family: "Dancing Script", cursive;
                font-size: 1rem;
                color: #feebea;
                opacity: 0.8;
                cursor: text;
                user-select: text;
                word-wrap: break-word;
                overflow-wrap: break-word;
                line-height: 1.1;
                max-width: 100%;
                width: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
                text-align: center;
                overflow: hidden;
            }

            .quote-clickable {
                cursor: pointer;
                user-select: text;
            }

            .quote-clickable:hover {
                opacity: 1;
            }

            .phoebe-section {
                text-align: center;
                margin: 4rem 0;
                padding: 2rem;
                background: linear-gradient(
                    45deg,
                    rgba(254, 235, 234, 0.05),
                    rgba(254, 235, 234, 0.1)
                );
                border-radius: 20px;
                border: 1px solid rgba(254, 235, 234, 0.2);
                backdrop-filter: blur(10px);
            }

            .phoebe-title {
                font-family: "Pacifico", cursive;
                font-size: 2rem;
                color: #feebea;
                margin-bottom: 1.5rem;
            }

            .phoebe-quote {
                font-family: "Dancing Script", cursive;
                font-size: 1.3rem;
                color: #feebea;
                opacity: 0.9;
                line-height: 1.6;
                max-width: 450px;
                margin: 0 auto;
                font-style: italic;
            }

            .final-tribute {
                text-align: center;
                margin-top: 4rem;
                padding: 2rem;
                border-top: 1px solid rgba(254, 235, 234, 0.2);
            }

            .final-text {
                font-family: "Great Vibes", cursive;
                font-size: 2rem;
                color: #feebea;
                opacity: 0.7;
            }

            .copy-notification {
                position: fixed;
                top: 1rem;
                right: 1rem;
                background: #feebea;
                color: #333;
                padding: 0.8rem 1.5rem;
                border-radius: 25px;
                font-family: "Dancing Script", cursive;
                font-size: 1rem;
                font-weight: 600;
                opacity: 0;
                transform: translateY(-20px);
                transition: all 0.3s ease;
                z-index: 1000;
                max-width: 200px;
                text-align: center;
            }

            .copy-notification.show {
                opacity: 1;
                transform: translateY(0);
            }

            .hidden {
                display: none;
            }

            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateY(50px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            @keyframes fadeInUp {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            @keyframes pulse {
                0%,
                100% {
                    transform: scale(1);
                }
                50% {
                    transform: scale(1.02);
                }
            }

            @keyframes rotate {
                0% {
                    transform: rotate(0deg);
                }
                100% {
                    transform: rotate(360deg);
                }
            }

            @keyframes ripple {
                to {
                    transform: scale(4);
                    opacity: 0;
                }
            }

            @keyframes fallFromTop {
                0% {
                    transform: translate(-50%, -150%);
                    opacity: 0;
                }
                100% {
                    transform: translate(-50%, -50%);
                    opacity: 1;
                }
            }

            @keyframes fallFromTopLeft {
                0% {
                    transform: translate(-150%, -150%);
                    opacity: 0;
                }
                100% {
                    transform: translate(-50%, -50%);
                    opacity: 1;
                }
            }

            @keyframes fallFromTopRight {
                0% {
                    transform: translate(50%, -150%);
                    opacity: 0;
                }
                100% {
                    transform: translate(-50%, -50%);
                    opacity: 1;
                }
            }

            @keyframes fallAndBounce {
                0% {
                    transform: translate(-50%, -150%);
                    opacity: 0;
                }
                70% {
                    transform: translate(-50%, -45%);
                    opacity: 1;
                }
                85% {
                    transform: translate(-50%, -52%);
                }
                100% {
                    transform: translate(-50%, -50%);
                    opacity: 1;
                }
            }

            @keyframes glow {
                0% {
                    text-shadow:
                        0 0 20px rgba(254, 235, 234, 0.8),
                        0 0 40px rgba(254, 235, 234, 0.6),
                        0 0 80px rgba(254, 235, 234, 0.4),
                        0 0 120px rgba(254, 235, 234, 0.2);
                }
                100% {
                    text-shadow:
                        0 0 30px rgba(254, 235, 234, 1),
                        0 0 60px rgba(254, 235, 234, 0.8),
                        0 0 120px rgba(254, 235, 234, 0.6),
                        0 0 180px rgba(254, 235, 234, 0.4);
                }
            }

            /* High-performance text splitting and portal effects */
            .rick-portal {
                position: fixed;
                transform: translate(-50%, -50%);
                z-index: 5000;
                opacity: 0;
                transition: opacity 1s ease-in-out;
                pointer-events: none;
                will-change: opacity;
                text-align: center;
            }

            .rick-portal.show {
                opacity: 1;
            }

            .rick-portal img {
                width: 300px;
                height: 300px;
                animation:
                    portal-fast-spin 20s ease-in-out forwards,
                    portal-glow 20s ease-in-out forwards;
                will-change: transform, opacity, filter, box-shadow;
                transform: translateZ(0);
                position: relative;
                z-index: 5;
                border-radius: 50%;
            }

            .rick-message {
                font-family: "Dancing Script", cursive;
                font-size: 2rem;
                color: #feebea;
                font-weight: 600;
                text-shadow: 0 0 20px rgba(254, 235, 234, 0.8);
                margin-top: 2rem;
                min-height: 3rem;
                z-index: 10;
                position: relative;
            }

            @keyframes portal-fast-spin {
                0% {
                    transform: rotate3d(0, 0, 1, 0deg) scale3d(1, 1, 1);
                    opacity: 1;
                    animation-timing-function: ease-out;
                }
                25% {
                    transform: rotate3d(0, 0, 1, 360deg) scale3d(1.4, 1.4, 1);
                    opacity: 1;
                    animation-timing-function: ease-out;
                }
                50% {
                    transform: rotate3d(0, 0, 1, 720deg) scale3d(1.8, 1.8, 1);
                    opacity: 1;
                    animation-timing-function: ease-out;
                }
                75% {
                    transform: rotate3d(0, 0, 1, 1080deg) scale3d(2, 2, 1);
                    opacity: 1;
                    animation-timing-function: linear;
                }
                85% {
                    transform: rotate3d(0, 0, 1, 1440deg) scale3d(2, 2, 1);
                    opacity: 1;
                    animation-timing-function: linear;
                }
                90% {
                    transform: rotate3d(0, 0, 1, 2160deg) scale3d(1.5, 1.5, 1);
                    opacity: 0.8;
                    animation-timing-function: cubic-bezier(
                        0.755,
                        0.05,
                        0.855,
                        0.06
                    );
                }
                95% {
                    transform: rotate3d(0, 0, 1, 3600deg) scale3d(0.5, 0.5, 1);
                    opacity: 0.3;
                    animation-timing-function: cubic-bezier(
                        0.95,
                        0.05,
                        0.795,
                        0.035
                    );
                }
                98% {
                    transform: rotate3d(0, 0, 1, 4680deg) scale3d(0.1, 0.1, 1);
                    opacity: 0.1;
                    animation-timing-function: cubic-bezier(
                        0.98,
                        0.02,
                        0.82,
                        0.01
                    );
                }
                100% {
                    transform: rotate3d(0, 0, 1, 5400deg) scale3d(0, 0, 1);
                    opacity: 0;
                }
            }

            @keyframes portal-glow {
                0% {
                    box-shadow:
                        0 0 20px #00ff88,
                        0 0 40px #00ff88,
                        0 0 60px #00ff88,
                        inset 0 0 20px rgba(0, 255, 136, 0.3);
                    filter: brightness(1.2) saturate(1.5);
                }
                25% {
                    box-shadow:
                        0 0 50px #00ff88,
                        0 0 100px #00ff88,
                        0 0 150px #00ff88,
                        inset 0 0 50px rgba(0, 255, 136, 0.4);
                    filter: brightness(1.6) saturate(2);
                }
                50% {
                    box-shadow:
                        0 0 80px #00ccff,
                        0 0 160px #00ccff,
                        0 0 240px #00ccff,
                        inset 0 0 80px rgba(0, 204, 255, 0.5);
                    filter: brightness(1.8) saturate(2.2);
                }
                75% {
                    box-shadow:
                        0 0 100px #8800ff,
                        0 0 200px #8800ff,
                        0 0 300px #8800ff,
                        inset 0 0 100px rgba(136, 0, 255, 0.6);
                    filter: brightness(2) saturate(2.5);
                }
                85% {
                    box-shadow:
                        0 0 120px #ff0088,
                        0 0 240px #ff0088,
                        0 0 360px #ff0088,
                        inset 0 0 120px rgba(255, 0, 136, 0.7);
                    filter: brightness(2.2) saturate(3);
                }
                90% {
                    box-shadow:
                        0 0 60px #ffaa00,
                        0 0 120px #ffaa00,
                        0 0 180px #ffaa00,
                        inset 0 0 60px rgba(255, 170, 0, 0.5);
                    filter: brightness(1.8) saturate(2);
                }
                95% {
                    box-shadow:
                        0 0 20px #ffffff,
                        0 0 40px #ffffff,
                        0 0 60px #ffffff,
                        inset 0 0 20px rgba(255, 255, 255, 0.3);
                    filter: brightness(1.2) saturate(1.2);
                }
                98% {
                    box-shadow:
                        0 0 5px #ffffff,
                        0 0 10px #ffffff,
                        0 0 15px #ffffff,
                        inset 0 0 5px rgba(255, 255, 255, 0.1);
                    filter: brightness(0.6) saturate(0.8);
                }
                100% {
                    box-shadow: none;
                    filter: brightness(0.2) saturate(0.3);
                }
            }

            /* Letter splitting and distortion effects */
            .letter-particle {
                display: inline-block;
                position: relative;
                will-change: transform, opacity;
                transform-style: preserve-3d;
                backface-visibility: hidden;
                transform: translateZ(0);
            }

            .letter-exploding {
                animation: letter-explode var(--duration, 2s) var(--delay, 0s)
                    ease-out forwards;
            }

            @keyframes letter-explode {
                0% {
                    transform: translate3d(0, 0, 0) rotate3d(0, 0, 1, 0deg)
                        scale3d(1, 1, 1) skew(0deg, 0deg);
                    opacity: 1;
                    filter: blur(0px);
                    animation-timing-function: ease-in;
                }
                15% {
                    transform: translate3d(
                            calc(var(--dx) * 0.01),
                            calc(var(--dy) * 0.01),
                            0
                        )
                        rotate3d(0, 0, 1, calc(var(--rotation) * 8deg))
                        scale3d(1.02, 0.98, 1) skew(2deg, 1deg);
                    opacity: 0.99;
                    filter: blur(0.1px);
                    animation-timing-function: ease-in;
                }
                25% {
                    transform: translate3d(
                            calc(var(--dx) * 0.03),
                            calc(var(--dy) * 0.03),
                            0
                        )
                        rotate3d(0, 0, 1, calc(var(--rotation) * 20deg))
                        scale3d(1.05, 0.95, 1) skew(5deg, 3deg);
                    opacity: 0.96;
                    filter: blur(0.3px);
                    animation-timing-function: ease-out;
                }
                40% {
                    transform: translate3d(
                            calc(var(--dx) * 0.08),
                            calc(var(--dx) * 0.08),
                            0
                        )
                        rotate3d(0, 0, 1, calc(var(--rotation) * 60deg))
                        scale3d(1.1, 0.9, 1) skew(12deg, 8deg);
                    opacity: 0.9;
                    filter: blur(0.8px);
                    animation-timing-function: cubic-bezier(
                        0.25,
                        0.46,
                        0.45,
                        0.94
                    );
                }
                55% {
                    transform: translate3d(
                            calc(var(--dx) * 0.2),
                            calc(var(--dy) * 0.2),
                            0
                        )
                        rotate3d(0, 0, 1, calc(var(--rotation) * 180deg))
                        scale3d(1.15, 0.85, 1) skew(25deg, 18deg);
                    opacity: 0.8;
                    filter: blur(1.2px);
                    animation-timing-function: cubic-bezier(
                        0.55,
                        0.055,
                        0.675,
                        0.19
                    );
                }
                70% {
                    transform: translate3d(
                            calc(var(--dx) * 0.45),
                            calc(var(--dy) * 0.45),
                            0
                        )
                        rotate3d(0, 0, 1, calc(var(--rotation) * 420deg))
                        scale3d(0.9, 1.1, 1) skew(40deg, 30deg);
                    opacity: 0.6;
                    filter: blur(2px);
                    animation-timing-function: cubic-bezier(
                        0.215,
                        0.61,
                        0.355,
                        1
                    );
                }
                85% {
                    transform: translate3d(
                            calc(var(--dx) * 0.8),
                            calc(var(--dy) * 0.8),
                            0
                        )
                        rotate3d(0, 0, 1, calc(var(--rotation) * 900deg))
                        scale3d(0.5, 0.5, 1) skew(65deg, 50deg);
                    opacity: 0.3;
                    filter: blur(3.5px);
                    animation-timing-function: cubic-bezier(
                        0.755,
                        0.05,
                        0.855,
                        0.06
                    );
                }
                95% {
                    transform: translate3d(
                            calc(var(--dx) * 0.95),
                            calc(var(--dy) * 0.95),
                            0
                        )
                        rotate3d(0, 0, 1, calc(var(--rotation) * 1440deg))
                        scale3d(0.2, 0.2, 1) skew(80deg, 70deg);
                    opacity: 0.1;
                    filter: blur(4.5px);
                    animation-timing-function: cubic-bezier(
                        0.95,
                        0.05,
                        0.795,
                        0.035
                    );
                }
                100% {
                    transform: translate3d(var(--dx), var(--dy), 0)
                        rotate3d(0, 0, 1, calc(var(--rotation) * 1800deg))
                        scale3d(0, 0, 1) skew(90deg, 75deg);
                    opacity: 0;
                    filter: blur(5px);
                }
            }

            /* Element sucking effect with GPU acceleration */
            .element-sucking {
                animation: element-suck var(--duration, 2s) var(--delay, 0s)
                    cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
                will-change: transform, opacity;
                transform-style: preserve-3d;
                backface-visibility: hidden;
            }

            @keyframes element-suck {
                0% {
                    transform: translate3d(0, 0, 0) scale3d(1, 1, 1)
                        rotate3d(0, 0, 1, 0deg);
                    opacity: 1;
                    border-radius: 0;
                    clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);
                    filter: blur(0px);
                }
                20% {
                    transform: translate3d(
                            calc(var(--dx) * 0.02),
                            calc(var(--dy) * 0.02),
                            0
                        )
                        scale3d(0.98, 0.98, 1)
                        rotate3d(0, 0, 1, calc(var(--rotation, 1) * 25deg));
                    opacity: 0.95;
                    border-radius: 3px;
                    clip-path: polygon(2% 1%, 98% 3%, 97% 98%, 3% 99%);
                    filter: blur(0.2px);
                }
                35% {
                    transform: translate3d(
                            calc(var(--dx) * 0.08),
                            calc(var(--dy) * 0.08),
                            0
                        )
                        scale3d(0.92, 0.92, 1)
                        rotate3d(0, 0, 1, calc(var(--rotation, 1) * 90deg));
                    opacity: 0.88;
                    border-radius: 8px;
                    clip-path: polygon(5% 3%, 95% 8%, 92% 95%, 8% 97%);
                    filter: blur(0.8px);
                }
                50% {
                    transform: translate3d(
                            calc(var(--dx) * 0.2),
                            calc(var(--dy) * 0.2),
                            0
                        )
                        scale3d(0.85, 0.85, 1)
                        rotate3d(0, 0, 1, calc(var(--rotation, 1) * 220deg));
                    opacity: 0.78;
                    border-radius: 15px;
                    clip-path: polygon(8% 5%, 92% 12%, 88% 92%, 12% 95%);
                    filter: blur(1.5px);
                }
                65% {
                    transform: translate3d(
                            calc(var(--dx) * 0.4),
                            calc(var(--dy) * 0.4),
                            0
                        )
                        scale3d(0.7, 0.7, 1)
                        rotate3d(0, 0, 1, calc(var(--rotation, 1) * 420deg));
                    opacity: 0.65;
                    border-radius: 25px;
                    clip-path: polygon(12% 8%, 88% 18%, 82% 88%, 18% 92%);
                    filter: blur(2.5px);
                }
                80% {
                    transform: translate3d(
                            calc(var(--dx) * 0.7),
                            calc(var(--dy) * 0.7),
                            0
                        )
                        scale3d(0.5, 0.5, 1)
                        rotate3d(0, 0, 1, calc(var(--rotation, 1) * 720deg));
                    opacity: 0.45;
                    border-radius: 40px;
                    clip-path: polygon(18% 12%, 82% 25%, 75% 82%, 25% 88%);
                    filter: blur(3.5px);
                }
                90% {
                    transform: translate3d(
                            calc(var(--dx) * 0.9),
                            calc(var(--dy) * 0.9),
                            0
                        )
                        scale3d(0.3, 0.3, 1)
                        rotate3d(0, 0, 1, calc(var(--rotation, 1) * 1080deg));
                    opacity: 0.25;
                    border-radius: 50px;
                    clip-path: polygon(25% 18%, 75% 35%, 65% 75%, 35% 82%);
                    filter: blur(4.5px);
                }
                100% {
                    transform: translate3d(var(--dx), var(--dy), 0)
                        scale3d(0, 0, 1)
                        rotate3d(0, 0, 1, calc(var(--rotation, 1) * 1440deg));
                    opacity: 0;
                    border-radius: 50px;
                    clip-path: polygon(50% 50%, 50% 50%, 50% 50%, 50% 50%);
                    filter: blur(5px);
                }
            }

            .final-background {
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                background: #feebea;
                z-index: 4000;
                opacity: 0;
                transition: opacity 4s ease-in;
                will-change: opacity;
                overflow: hidden;
                margin: 0;
                padding: 0;
                border: none;
                outline: none;
            }

            .final-background.show {
                opacity: 1;
            }

            body.portal-mode {
                overflow: hidden !important;
                height: 100vh !important;
                width: 100vw !important;
                position: fixed !important;
                top: 0 !important;
                left: 0 !important;
            }

            html.portal-mode {
                overflow: hidden !important;
                height: 100% !important;
                width: 100% !important;
            }

            body.portal-mode * {
                scrollbar-width: none !important;
                -ms-overflow-style: none !important;
            }

            body.portal-mode *::-webkit-scrollbar {
                display: none !important;
                width: 0 !important;
                height: 0 !important;
            }

            /* Mobile and Tablet Optimizations */
            @media (max-width: 1024px) {
                .container {
                    max-width: 100%;
                    padding: 1.5rem 1rem;
                }

                .main-title {
                    font-size: 3.5rem;
                }

                .color-circle {
                    width: 220px;
                    height: 220px;
                }

                .essence {
                    gap: 1rem;
                    padding: 0 0.5rem;
                    max-width: 100%;
                }

                .essence-card {
                    width: 250px;
                    height: 150px;
                    min-width: 250px;
                }

                .essence-title {
                    font-size: 1.1rem;
                }

                .essence-desc {
                    font-size: 0.9rem;
                }
            }

            @media (max-width: 768px) {
                .container {
                    padding: 1rem 0.8rem;
                }

                .main-title {
                    font-size: 3rem;
                }

                .subtitle {
                    font-size: 1.2rem;
                }

                .color-circle {
                    width: 180px;
                    height: 180px;
                }

                .meditation-text,
                .quote-text {
                    font-size: 1.1rem;
                }

                .quote-section {
                    gap: 0.8rem;
                }

                .quote-section .quote-text {
                    min-width: 250px;
                }

                .meditation-text {
                    max-width: 90%;
                }

                .essence {
                    gap: 0.8rem;
                    padding: 0 0.5rem;
                    overflow-x: auto;
                    justify-content: flex-start;
                    max-width: 90%;
                }

                .essence-card {
                    padding: 1rem;
                    width: 210px;
                    height: 130px;
                    min-width: 210px;
                    margin-top: 8px;
                }

                .essence-title {
                    font-size: 1rem;
                }

                .essence-desc {
                    font-size: 0.8rem;
                }

                .phoebe-title {
                    font-size: 1.6rem;
                }

                .phoebe-quote {
                    font-size: 1.1rem;
                }

                .final-text {
                    font-size: 1.6rem;
                }

                .lang-toggle {
                    padding: 0.5rem 1rem;
                    font-size: 0.9rem;
                }

                .copy-notification {
                    padding: 0.6rem 1.2rem;
                    font-size: 0.9rem;
                    max-width: 160px;
                }
            }

            @media (max-width: 480px) {
                .main-title {
                    font-size: 2.5rem;
                }

                .color-circle {
                    width: 150px;
                    height: 150px;
                }

                .quote-section,
                .phoebe-section {
                    padding: 1.5rem;
                    margin: 3rem 0;
                    flex-direction: column;
                    gap: 0.5rem;
                }

                .quote-section .quote-text {
                    min-width: auto;
                    text-align: center;
                }

                .meditation-text,
                .quote-text {
                    font-size: 1.1rem;
                }

                .essence-title {
                    font-size: 1.2rem;
                }

                .essence-desc {
                    font-size: 0.9rem;
                }

                .rick-portal img {
                    width: 150px;
                    height: 150px;
                }

                .rick-message {
                    font-size: 1.2rem;
                }

                #pickle-rick {
                    width: 60px !important;
                    height: 60px !important;
                    bottom: 15px !important;
                    left: 15px !important;
                }

                /* Pickle Rick text responsive styles */
                .pickle-text-mobile {
                    font-size: clamp(2rem, 12vw, 4rem) !important;
                    letter-spacing: 0.05em !important;
                    text-shadow:
                        2px 2px 0px #2e7d32,
                        4px 4px 0px #1b5e20,
                        6px 6px 0px #0d4e14,
                        8px 8px 15px rgba(0, 0, 0, 0.4) !important;
                }
            }

            /* Touch device optimizations */
            @media (hover: none) and (pointer: coarse) {
                .code-item:active {
                    color: #fff;
                    text-shadow: 0 0 10px rgba(254, 235, 234, 0.5);
                }

                .essence-card:active {
                    background: rgba(254, 235, 234, 0.08);
                    transform: translateY(-2px);
                }
            }

            /* Cyberpunk 2077 Easter Egg Styles */
            .cyberpunk-easter-egg {
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                background: #feebea;
                display: flex;
                justify-content: center;
                align-items: center;
                flex-direction: column;
                z-index: 10000;
                opacity: 0;
                visibility: hidden;
                transition: all 0.8s ease;
            }

            .cyberpunk-easter-egg.show {
                opacity: 1;
                visibility: visible;
            }

            .cyberpunk-content {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 2rem;
                animation: cyberpunkEntry 3s ease-out forwards;
            }

            .broken-heart {
                font-size: 12rem;
                color: #ffffff;
                text-shadow:
                    0 0 20px #ffffff,
                    0 0 40px #ffffff,
                    0 0 60px #ffffff;
                animation: heartbreak 2s ease-in-out infinite alternate;
                user-select: none;
            }

            @keyframes heartbreak {
                0% {
                    transform: scale(1) rotate(0deg);
                    filter: brightness(1);
                }
                50% {
                    transform: scale(1.1) rotate(-2deg);
                    filter: brightness(1.2);
                }
                100% {
                    transform: scale(1.05) rotate(2deg);
                    filter: brightness(0.9);
                }
            }

            .cyberpunk-text {
                font-family: "Courier New", monospace;
                font-size: 8rem;
                color: #ffffff;
                text-shadow:
                    0 0 10px #ffffff,
                    0 0 20px #ffffff,
                    0 0 30px #ffffff;
                font-weight: bold;
                letter-spacing: 0.5rem;
                animation: cyberpunkGlow 1.5s ease-in-out infinite alternate;
                user-select: none;
            }

            @keyframes cyberpunkEntry {
                0% {
                    opacity: 0;
                    transform: scale(2) rotate(10deg);
                }
                50% {
                    opacity: 1;
                    transform: scale(1.2) rotate(-5deg);
                }
                100% {
                    opacity: 0.9;
                    transform: scale(1) rotate(0deg);
                }
            }

            @keyframes cyberpunkGlow {
                0% {
                    opacity: 0.8;
                    text-shadow:
                        0 0 10px #ffffff,
                        0 0 20px #ffffff,
                        0 0 30px #ffffff;
                }
                100% {
                    opacity: 1;
                    text-shadow:
                        0 0 15px #ffffff,
                        0 0 30px #ffffff,
                        0 0 45px #ffffff,
                        0 0 60px #ffffff;
                }
            }

            .audio-control-panel {
                position: fixed;
                right: 1rem;
                top: 50%;
                transform: translateY(-50%);
                background: rgba(0, 0, 0, 0.8);
                border: 2px solid #00ffff;
                border-radius: 15px;
                padding: 1rem;
                backdrop-filter: blur(10px);
                z-index: 9999;
                opacity: 0;
                visibility: hidden;
                transition: all 0.3s ease;
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 0.5rem;
                min-width: 80px;
            }

            .audio-control-panel.show {
                opacity: 1;
                visibility: visible;
            }

            .audio-control-panel.hidden-during-fullscreen {
                opacity: 0;
                visibility: hidden;
            }

            .audio-control-btn {
                background: rgba(0, 255, 255, 0.2);
                border: 1px solid #00ffff;
                color: #00ffff;
                padding: 0.8rem;
                border-radius: 50%;
                font-family: "Courier New", monospace;
                font-size: 1.5rem;
                cursor: pointer;
                transition: all 0.3s ease;
                width: 50px;
                height: 50px;
                display: flex;
                align-items: center;
                justify-content: center;
                animation: audioButtonPulse 2s ease-in-out infinite;
            }

            .audio-control-btn:hover {
                background: rgba(0, 255, 255, 0.4);
                box-shadow: 0 0 15px rgba(0, 255, 255, 0.5);
                transform: scale(1.1);
            }

            .audio-control-btn:active {
                transform: scale(0.95);
            }

            .audio-status {
                color: #00ffff;
                font-family: "Courier New", monospace;
                font-size: 0.7rem;
                text-align: center;
                opacity: 0.8;
            }

            @keyframes audioButtonPulse {
                0%, 100% {
                    box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
                }
                50% {
                    box-shadow: 0 0 20px rgba(0, 255, 255, 0.6);
                }
            }

            .close-easter-egg {
                position: fixed;
                top: 2rem;
                right: 2rem;
                background: rgba(255, 255, 255, 0.1);
                border: 2px solid #ffffff;
                color: #ffffff;
                padding: 0.5rem 1rem;
                border-radius: 50%;
                font-family: "Courier New", monospace;
                font-size: 1.5rem;
                cursor: pointer;
                transition: all 0.3s ease;
                z-index: 9998;
                opacity: 0;
                visibility: hidden;
                backdrop-filter: blur(10px);
                width: 60px;
                height: 60px;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .close-easter-egg.show {
                opacity: 1;
                visibility: visible;
            }

            .close-easter-egg.hidden-during-fullscreen {
                opacity: 0;
                visibility: hidden;
            }

            .close-easter-egg:hover {
                background: rgba(255, 255, 255, 0.2);
                box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
                transform: scale(1.1) rotate(90deg);
            }

            /* Cyberpunk mode body styles */
            body.cyberpunk-mode {
                background: linear-gradient(
                    135deg,
                    #000000 0%,
                    #0f0f0f 50%,
                    #1a0a0a 100%
                );
            }

            body.cyberpunk-mode .zima-square {
                display: none !important;
            }

            @media (max-width: 768px) {
                .cyberpunk-content {
                    flex-direction: column;
                    gap: 1rem;
                }

                .broken-heart {
                    font-size: 6rem;
                }

                .cyberpunk-text {
                    font-size: 4rem;
                    letter-spacing: 0.3rem;
                }

                .audio-control-panel {
                    right: 0.5rem;
                    padding: 0.8rem;
                }

                .audio-control-btn {
                    width: 45px;
                    height: 45px;
                    font-size: 1.2rem;
                }
            }

            @media (max-width: 480px) {
                .broken-heart {
                    font-size: 4rem;
                }

                .cyberpunk-text {
                    font-size: 3rem;
                    letter-spacing: 0.2rem;
                }

                .audio-control-panel {
                    right: 0.3rem;
                    padding: 0.6rem;
                }

                .audio-control-btn {
                    width: 40px;
                    height: 40px;
                    font-size: 1rem;
                }
            }

            /* Debug Panel Styles */
            .debug-panel {
                position: fixed;
                bottom: 2rem;
                right: 2rem;
                background: rgba(0, 0, 0, 0.8);
                border: 1px solid rgba(254, 235, 234, 0.3);
                border-radius: 10px;
                padding: 1rem;
                color: #feebea;
                font-family: "Courier New", monospace;
                font-size: 0.8rem;
                max-width: 300px;
                z-index: 9999;
                opacity: 0;
                visibility: hidden;
                transition: all 0.3s ease;
                backdrop-filter: blur(10px);
            }

            .debug-panel.show {
                opacity: 1;
                visibility: visible;
            }

            .debug-panel h4 {
                color: #00ffff;
                margin-bottom: 0.5rem;
                font-size: 0.9rem;
            }

            .debug-panel p {
                margin-bottom: 0.3rem;
                line-height: 1.3;
            }

            .debug-panel .easter-egg-hint {
                color: #ff6b6b;
                font-weight: bold;
                margin-top: 0.5rem;
            }

            .debug-panel .current-quotes {
                background: rgba(0, 255, 255, 0.1);
                padding: 0.5rem;
                border-radius: 5px;
                margin-top: 0.5rem;
            }

            .auto-click-btn {
                background: rgba(255, 215, 0, 0.2);
                border: 2px solid #ffd700;
                color: #ffd700;
                padding: 0.5rem 1rem;
                border-radius: 20px;
                font-family: "Courier New", monospace;
                font-size: 0.8rem;
                cursor: pointer;
                transition: all 0.3s ease;
                margin-top: 0.5rem;
                width: 100%;
                font-weight: bold;
            }

            .auto-click-btn:hover {
                background: rgba(255, 215, 0, 0.3);
                box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
                transform: scale(1.02);
            }

            .auto-click-btn:active {
                transform: scale(0.98);
            }

            .auto-click-btn.running {
                background: rgba(255, 69, 0, 0.2);
                border-color: #ff4500;
                color: #ff4500;
                animation: autoClickPulse 1s ease-in-out infinite alternate;
            }

            @keyframes autoClickPulse {
                0% {
                    box-shadow: 0 0 5px rgba(255, 69, 0, 0.3);
                }
                100% {
                    box-shadow: 0 0 15px rgba(255, 69, 0, 0.7);
                }
            }

            .debug-toggle {
                position: fixed;
                bottom: 2rem;
                left: 2rem;
                background: rgba(254, 235, 234, 0.1);
                border: 2px solid rgba(254, 235, 234, 0.3);
                border-radius: 25px;
                padding: 0.5rem 1rem;
                color: #feebea;
                font-family: "Dancing Script", cursive;
                font-size: 0.9rem;
                cursor: pointer;
                transition: all 0.3s ease;
                backdrop-filter: blur(10px);
                z-index: 9998;
            }

            .debug-toggle:hover {
                background: rgba(254, 235, 234, 0.2);
                transform: scale(1.05);
            }
        </style>
    </head>
    <body>
        <button class="lang-toggle" onclick="toggleLanguage()">
            <span id="langButton"></span>
        </button>

        <div class="copy-notification" id="copyNotification">
            <span id="copyText">Copied to clipboard</span>
        </div>

        <div class="container">
            <!-- English Content -->
            <div id="englishContent">
                <header class="header">
                    <h1
                        class="main-title"
                        onclick="window.open('https://feebea.com', '_blank')"
                        style="cursor: pointer"
                    >
                        Feebea
                    </h1>

                    <p
                        class="tribute"
                        onclick="copyToClipboard('To Those I Love')"
                        style="cursor: pointer"
                    >
                        To Those I Love
                    </p>
                </header>

                <section class="color-display">
                    <div
                        class="color-circle"
                        onclick="copyToClipboard('#feebea')"
                    ></div>
                </section>

                <section class="color-info">
                    <div class="color-codes">
                        <div
                            class="code-item"
                            onclick="copyToClipboard('#feebea')"
                        >
                            #feebea
                        </div>
                        <div
                            class="code-item"
                            onclick="copyToClipboard('rgb(254, 235, 234)')"
                        >
                            rgb(254, 235, 234)
                        </div>
                        <div
                            class="code-item"
                            onclick="copyToClipboard('hsl(3, 91%, 96%)')"
                        >
                            hsl(3, 91%, 96%)
                        </div>
                    </div>
                </section>

                <section class="quote-section">
                    <p class="quote-text">
                        "My search for truth is finished at last. I'm going
                        home."
                    </p>
                    <p class="quote-author"> Zima Blue</p>
                </section>

                <section class="meditation">
                    <p class="meditation-text">
                        "Sometimes, it's difficult even for me<br />
                        to understand what I've become.<br />
                        And harder still to remember what I once was.<br />
                        The blue of the tiles...<br />
                        Zima Blue, the manufacturer called it.<br />
                        The first thing I ever saw.<br />
                        This was where I began.<br />
                        A crude little machine with<br />
                        barely enough intelligence to steer itself.<br />
                        But it was my world.<br />
                        It was all I knew, all I needed to know.<br />
                        And now?<br />
                        I will immerse myself.<br />
                        And as I do, I will slowly shut down my higher brain
                        functions...<br />
                        un-making myself...<br />
                        leaving just enough to appreciate my surroundings...<br />
                        to extract some simple pleasure<br />
                        from the execution of a task well done.<br />
                        My search for truth is finished at last.<br />
                        I'm going home."
                    </p>
                </section>

                <section class="essence">
                    <div class="essence-card" onclick="changeQuote(0)">
                        <h3
                            class="essence-title quote-clickable"
                            onclick="event.stopPropagation(); copyQuoteText(this)"
                        >
                            The night is dark and full of terrors
                        </h3>
                        <p
                            class="essence-desc quote-clickable"
                            onclick="event.stopPropagation(); copyQuoteText(this)"
                        >
                            Game of Thrones
                        </p>
                    </div>
                    <div class="essence-card" onclick="changeQuote(1)">
                        <h3
                            class="essence-title quote-clickable"
                            onclick="event.stopPropagation(); copyQuoteText(this)"
                        >
                            I have a hangover. A hangover with a hangover
                        </h3>
                        <p
                            class="essence-desc quote-clickable"
                            onclick="event.stopPropagation(); copyQuoteText(this)"
                        >
                            Black Books
                        </p>
                    </div>
                    <div class="essence-card" onclick="changeQuote(2)">
                        <h3
                            class="essence-title quote-clickable"
                            onclick="event.stopPropagation(); copyQuoteText(this)"
                        >
                            Life is a beautiful robe crawling with lice
                        </h3>
                        <p
                            class="essence-desc quote-clickable"
                            onclick="event.stopPropagation(); copyQuoteText(this)"
                        >
                            Zhang Ailing
                        </p>
                    </div>
                </section>

                <section class="phoebe-section">
                    <h2 class="phoebe-title">Phoebe's Wisdom</h2>
                    <p class="phoebe-quote">
                        "Maybe this is what's meant to be.<br />
                        Like, maybe the universe has a plan for us."
                    </p>
                </section>

                <footer class="final-tribute">
                    <p class="final-text">Peng</p>
                </footer>
            </div>

            <!-- Chinese Content -->
            <div id="chineseContent" class="hidden">
                <header class="header">
                    <h1
                        class="main-title"
                        onclick="window.open('https://feebea.com', '_blank')"
                        style="cursor: pointer"
                    >
                        Feebea
                    </h1>

                    <p
                        class="tribute"
                        onclick="copyToClipboard('')"
                        style="cursor: pointer"
                    >
                        
                    </p>
                </header>

                <section class="color-display">
                    <div
                        class="color-circle"
                        onclick="copyToClipboard('#feebea')"
                    ></div>
                </section>

                <section class="color-info">
                    <div class="color-codes">
                        <div
                            class="code-item"
                            onclick="copyToClipboard('#feebea')"
                        >
                            #feebea
                        </div>
                        <div
                            class="code-item"
                            onclick="copyToClipboard('rgb(254, 235, 234)')"
                        >
                            rgb(254, 235, 234)
                        </div>
                        <div
                            class="code-item"
                            onclick="copyToClipboard('hsl(3, 91%, 96%)')"
                        >
                            hsl(3, 91%, 96%)
                        </div>
                    </div>
                </section>

                <section class="quote-section">
                    <p class="quote-text">
                        ""
                    </p>
                    <p class="quote-author"> </p>
                </section>

                <section class="meditation">
                    <p class="meditation-text">
                        "Sometimes, it's difficult even for me<br />
                         <br />
                        to understand what I've become.<br />
                        <br />
                        And harder still to remember what I once was.<br />
                        <br />
                        The blue of the tiles...<br />
                        <br />
                        Zima Blue, the manufacturer called it.<br />
                         <br />
                        The first thing I ever saw.<br />
                        <br />
                        This was where I began.<br />
                        <br />
                        A crude little machine with<br />
                        <br />
                        barely enough intelligence to steer itself.<br />
                        <br />
                        But it was my world.<br />
                        <br />
                        It was all I knew, all I needed to know.<br />
                         <br />
                        And now?<br />
                        <br />
                        I will immerse myself.<br />
                        <br />
                        And as I do, I will slowly shut down my higher brain
                        functions...<br />
                         <br />
                        un-making myself...<br />
                        <br />
                        leaving just enough to appreciate my surroundings...<br />
                        <br />
                        to extract some simple pleasure<br />
                        <br />
                        from the execution of a task well done.<br />
                        <br />
                        My search for truth is finished at last.<br />
                        <br />
                        I'm going home."<br />
                        
                    </p>
                </section>

                <section class="essence">
                    <div class="essence-card" onclick="changeQuote(0)">
                        <h3
                            class="essence-title quote-clickable"
                            onclick="event.stopPropagation(); copyQuoteText(this)"
                        >
                            
                        </h3>
                        <p
                            class="essence-desc quote-clickable"
                            onclick="event.stopPropagation(); copyQuoteText(this)"
                        >
                            
                        </p>
                    </div>
                    <div class="essence-card" onclick="changeQuote(1)">
                        <h3
                            class="essence-title quote-clickable"
                            onclick="event.stopPropagation(); copyQuoteText(this)"
                        >
                            
                        </h3>
                        <p
                            class="essence-desc quote-clickable"
                            onclick="event.stopPropagation(); copyQuoteText(this)"
                        >
                            
                        </p>
                    </div>
                    <div class="essence-card" onclick="changeQuote(2)">
                        <h3
                            class="essence-title quote-clickable"
                            onclick="event.stopPropagation(); copyQuoteText(this)"
                        >
                            
                        </h3>
                        <p
                            class="essence-desc quote-clickable"
                            onclick="event.stopPropagation(); copyQuoteText(this)"
                        >
                            
                        </p>
                    </div>
                </section>

                <section class="phoebe-section">
                    <h2 class="phoebe-title"></h2>
                    <p class="phoebe-quote">
                        "Maybe this is what's meant to be.<br />
                        <br />
                        Like, maybe the universe has a plan for us."<br />
                        
                    </p>
                </section>

                <footer class="final-tribute">
                    <p class="final-text">Peng</p>
                </footer>
            </div>
        </div>

        <script>
            let isEnglish = true;

            function toggleLanguage() {
                const englishContent =
                    document.getElementById("englishContent");
                const chineseContent =
                    document.getElementById("chineseContent");
                const langButton = document.getElementById("langButton");
                const copyText = document.getElementById("copyText");
                const body = document.body;

                // Handle cumulative click easter egg
                clickCounters.langToggle++;
                console.log(
                    ` Language toggle clicked, cumulative count: ${clickCounters.langToggle}`,
                );
                console.log(
                    " Current language:",
                    isEnglish ? "English" : "Chinese",
                );
                if (clickCounters.langToggle === 3) {
                    console.log(" Language toggle easter egg triggered!");
                    easterEggTriggered.langToggle = true;
                    setTimeout(() => {
                        console.log(" About to play they-dont-know.mp3");
                        playAudio("they-dont-know.mp3");
                        showEasterEggNotification(
                            isEnglish
                                ? "They Don't Know That We Know They Know We Know."
                                : "",
                        );
                    }, 100);
                    clickCounters.langToggle = 0; // Reset counter after triggering
                }

                if (isEnglish) {
                    englishContent.classList.add("hidden");
                    chineseContent.classList.remove("hidden");
                    langButton.textContent = "English";
                    copyText.textContent = "";
                    body.classList.add("chinese");
                    isEnglish = false;
                } else {
                    englishContent.classList.remove("hidden");
                    chineseContent.classList.add("hidden");
                    langButton.textContent = "";
                    copyText.textContent = "Copied to clipboard";
                    body.classList.remove("chinese");
                    isEnglish = true;
                }

                // Re-adapt font sizes after language change
                setTimeout(() => {
                    adaptFontSizeResponsive();
                }, 100);
            }

            function copyToClipboard(text) {
                navigator.clipboard.writeText(text).then(
                    function () {
                        showCopyNotification();
                    },
                    function (err) {
                        console.error("Could not copy text: ", err);
                        // Fallback for older browsers
                        const textArea = document.createElement("textarea");
                        textArea.value = text;
                        document.body.appendChild(textArea);
                        textArea.select();
                        try {
                            document.execCommand("copy");
                            showCopyNotification();
                        } catch (err) {
                            console.error(
                                "Fallback: Could not copy text: ",
                                err,
                            );
                        }
                        document.body.removeChild(textArea);
                    },
                );
            }

            function showCopyNotification() {
                const notification =
                    document.getElementById("copyNotification");
                notification.classList.add("show");

                setTimeout(() => {
                    notification.classList.remove("show");
                }, 2000);
            }

            // Font size adaptation based on text length
            function adaptFontSize() {
                const essenceTitles =
                    document.querySelectorAll(".essence-title");
                const essenceDescs = document.querySelectorAll(".essence-desc");

                essenceTitles.forEach((title) => {
                    const textLength = title.textContent.length;
                    let fontSize;

                    if (textLength <= 8) {
                        fontSize = "1.3rem";
                    } else if (textLength <= 12) {
                        fontSize = "1.1rem";
                    } else if (textLength <= 16) {
                        fontSize = "1rem";
                    } else if (textLength <= 20) {
                        fontSize = "0.9rem";
                    } else {
                        fontSize = "0.8rem";
                    }

                    title.style.fontSize = fontSize;
                });

                essenceDescs.forEach((desc) => {
                    const textLength = desc.textContent.length;
                    let fontSize;

                    if (textLength <= 6) {
                        fontSize = "1rem";
                    } else if (textLength <= 10) {
                        fontSize = "0.9rem";
                    } else if (textLength <= 14) {
                        fontSize = "0.8rem";
                    } else {
                        fontSize = "0.7rem";
                    }

                    desc.style.fontSize = fontSize;
                });
            }

            // Responsive font size adaptation for mobile
            function adaptFontSizeResponsive() {
                const essenceTitles =
                    document.querySelectorAll(".essence-title");
                const essenceDescs = document.querySelectorAll(".essence-desc");
                const isMobile = window.innerWidth <= 768;
                const isSmallMobile = window.innerWidth <= 480;

                essenceTitles.forEach((title) => {
                    const textLength = title.textContent.length;
                    let fontSize;

                    if (isSmallMobile) {
                        if (textLength <= 8) {
                            fontSize = "1rem";
                        } else if (textLength <= 12) {
                            fontSize = "0.9rem";
                        } else if (textLength <= 16) {
                            fontSize = "0.8rem";
                        } else if (textLength <= 20) {
                            fontSize = "0.7rem";
                        } else {
                            fontSize = "0.6rem";
                        }
                    } else if (isMobile) {
                        if (textLength <= 8) {
                            fontSize = "1.1rem";
                        } else if (textLength <= 12) {
                            fontSize = "1rem";
                        } else if (textLength <= 16) {
                            fontSize = "0.9rem";
                        } else if (textLength <= 20) {
                            fontSize = "0.8rem";
                        } else {
                            fontSize = "0.7rem";
                        }
                    } else {
                        // Desktop sizes
                        if (textLength <= 8) {
                            fontSize = "1.3rem";
                        } else if (textLength <= 12) {
                            fontSize = "1.1rem";
                        } else if (textLength <= 16) {
                            fontSize = "1rem";
                        } else if (textLength <= 20) {
                            fontSize = "0.9rem";
                        } else {
                            fontSize = "0.8rem";
                        }
                    }

                    title.style.fontSize = fontSize;
                });

                essenceDescs.forEach((desc) => {
                    const textLength = desc.textContent.length;
                    let fontSize;

                    if (isSmallMobile) {
                        if (textLength <= 6) {
                            fontSize = "0.8rem";
                        } else if (textLength <= 10) {
                            fontSize = "0.7rem";
                        } else if (textLength <= 14) {
                            fontSize = "0.6rem";
                        } else {
                            fontSize = "0.55rem";
                        }
                    } else if (isMobile) {
                        if (textLength <= 6) {
                            fontSize = "0.9rem";
                        } else if (textLength <= 10) {
                            fontSize = "0.8rem";
                        } else if (textLength <= 14) {
                            fontSize = "0.7rem";
                        } else {
                            fontSize = "0.65rem";
                        }
                    } else {
                        // Desktop sizes
                        if (textLength <= 6) {
                            fontSize = "1rem";
                        } else if (textLength <= 10) {
                            fontSize = "0.9rem";
                        } else if (textLength <= 14) {
                            fontSize = "0.8rem";
                        } else {
                            fontSize = "0.7rem";
                        }
                    }

                    desc.style.fontSize = fontSize;
                });
            }

            // Initialize font adaptation
            document.addEventListener("DOMContentLoaded", function () {
                initializeQuotes();
                adaptFontSizeResponsive();
            });

            // Re-adapt font sizes on window resize
            window.addEventListener("resize", function () {
                adaptFontSizeResponsive();
            });

            // Add subtle parallax effect
            window.addEventListener("scroll", () => {
                const scrolled = window.pageYOffset;
                const circles = document.querySelector(".color-circle");
                if (circles) {
                    circles.style.transform = `translateY(${scrolled * 0.05}px)`;
                }
            });

            // Add click effect to color circle
            document
                .querySelector(".color-circle")
                .addEventListener("click", function (e) {
                    const ripple = document.createElement("div");
                    ripple.style.position = "absolute";
                    ripple.style.borderRadius = "50%";
                    ripple.style.background = "rgba(255, 255, 255, 0.3)";
                    ripple.style.transform = "scale(0)";
                    ripple.style.animation = "ripple 0.6s linear";
                    ripple.style.left = "50%";
                    ripple.style.top = "50%";
                    ripple.style.width = "100px";
                    ripple.style.height = "100px";
                    ripple.style.marginLeft = "-50px";
                    ripple.style.marginTop = "-50px";
                    ripple.style.zIndex = "0";

                    this.appendChild(ripple);

                    setTimeout(() => {
                        ripple.remove();
                    }, 600);
                });

            // Random quotes from various sources
            const quotesData = [
                // Zhang Ailing
                {
                    en: "Because of understanding, there is compassion",
                    zh: "",
                    source: "",
                    sourceEn: "Zhang Ailing",
                },
                {
                    en: "Life is a beautiful robe crawling with lice",
                    zh: "",
                    source: "",
                    sourceEn: "Zhang Ailing",
                },
                {
                    en: "Fame should come early",
                    zh: "",
                    source: "",
                    sourceEn: "Zhang Ailing",
                },
                {
                    en: "Meet the person you want to meet among thousands of people",
                    zh: "",
                    source: "",
                    sourceEn: "Zhang Ailing",
                },
                {
                    en: "Love is not to look at each other, but together look in the same direction",
                    zh: "",
                    source: "",
                    sourceEn: "Zhang Ailing",
                },

                // Wang Xiaobo
                {
                    en: "Wisdom itself is good",
                    zh: "",
                    source: "",
                    sourceEn: "Wang Xiaobo",
                },
                {
                    en: "I live to understand truths and encounter interesting things",
                    zh: "",
                    source: "",
                    sourceEn: "Wang Xiaobo",
                },
                {
                    en: "A person's joy should come from learning",
                    zh: "",
                    source: "",
                    sourceEn: "Wang Xiaobo",
                },
                {
                    en: "You are willing, I love you forever; unwilling, I miss you forever",
                    zh: "",
                    source: "",
                    sourceEn: "Wang Xiaobo",
                },

                // The Little Prince
                {
                    en: "What is essential is invisible to the eye",
                    zh: "",
                    source: "",
                    sourceEn: "The Little Prince",
                },
                {
                    en: "It is the time you have wasted for your rose that makes your rose so important",
                    zh: "",
                    source: "",
                    sourceEn: "The Little Prince",
                },
                {
                    en: "All grown-ups were once children",
                    zh: "",
                    source: "",
                    sourceEn: "The Little Prince",
                },
                {
                    en: "The stars are beautiful because of a flower that cannot be seen",
                    zh: "",
                    source: "",
                    sourceEn: "The Little Prince",
                },
                {
                    en: "One sees clearly only with the heart",
                    zh: "",
                    source: "",
                    sourceEn: "The Little Prince",
                },

                // Black Books
                {
                    en: "I'm not a loser! I'm a dreamer!",
                    zh: "",
                    source: "",
                    sourceEn: "Black Books",
                },
                {
                    en: "I ate all your bees!",
                    zh: "",
                    source: "",
                    sourceEn: "Black Books",
                },
                {
                    en: "Right, I'm going to have to ask you to stop being so happy.",
                    zh: "",
                    source: "",
                    sourceEn: "Black Books",
                },
                {
                    en: "Do you know what breakfast cereal is made of? It's made of all those little curly wooden shavings you find in pencil sharpeners!",
                    zh: "",
                    source: "",
                    sourceEn: "Black Books",
                },
                {
                    en: "I'm a little bit scared of dying. Are you? Oh, well, you wouldn't tell me if you were, would you?",
                    zh: "",
                    source: "",
                    sourceEn: "Black Books",
                },
                {
                    en: "Wine is fine but whiskey's quicker",
                    zh: "",
                    source: "",
                    sourceEn: "Black Books",
                },
                {
                    en: "I'm not a people person",
                    zh: "",
                    source: "",
                    sourceEn: "Black Books",
                },
                {
                    en: "The world is a beautiful place. We should all just shut up and eat cheese",
                    zh: "",
                    source: "",
                    sourceEn: "Black Books",
                },
                {
                    en: "Books. The best weapons in the world",
                    zh: "",
                    source: "",
                    sourceEn: "Black Books",
                },
                {
                    en: "I have a hangover. A hangover with a hangover",
                    zh: "",
                    source: "",
                    sourceEn: "Black Books",
                },

                // Zelda
                {
                    en: "Courage need not be remembered, for it is never forgotten",
                    zh: "",
                    source: "",
                    sourceEn: "The Legend of Zelda",
                },
                {
                    en: "It's dangerous to go alone",
                    zh: "",
                    source: "",
                    sourceEn: "The Legend of Zelda",
                },
                {
                    en: "The flow of time is always cruel",
                    zh: "",
                    source: "",
                    sourceEn: "The Legend of Zelda",
                },
                {
                    en: "May the way of the Hero lead to the Triforce",
                    zh: "",
                    source: "",
                    sourceEn: "The Legend of Zelda",
                },

                {
                    en: "Death is like the wind, always by my side",
                    zh: "",
                    source: "",
                    sourceEn: "League of Legends",
                },
                {
                    en: "My right arm is a lot stronger than my left arm",
                    zh: "",
                    source: "",
                    sourceEn: "League of Legends",
                },
                {
                    en: "Demacia!",
                    zh: "",
                    source: "",
                    sourceEn: "League of Legends",
                },
                {
                    en: "You belong in a museum!",
                    zh: "",
                    source: "",
                    sourceEn: "League of Legends",
                },
                {
                    en: "Rock solid",
                    zh: "",
                    source: "",
                    sourceEn: "League of Legends",
                },
                {
                    en: "Captain Teemo on duty!",
                    zh: "",
                    source: "",
                    sourceEn: "League of Legends",
                },
                {
                    en: "The heart is the strongest muscle",
                    zh: "",
                    source: "",
                    sourceEn: "League of Legends",
                },
                {
                    en: "Today is a good day to die",
                    zh: "",
                    source: "",
                    sourceEn: "League of Legends",
                },
                {
                    en: "Balance in all things",
                    zh: "",
                    source: "",
                    sourceEn: "League of Legends",
                },
                {
                    en: "The cycle of life and death continues",
                    zh: "",
                    source: "",
                    sourceEn: "League of Legends",
                },

                // Game of Thrones
                {
                    en: "Winter is coming",
                    zh: "",
                    source: "",
                    sourceEn: "Game of Thrones",
                },
                {
                    en: "When you play the game of thrones, you win or you die",
                    zh: "",
                    source: "",
                    sourceEn: "Game of Thrones",
                },
                {
                    en: "A mind needs books as a sword needs a whetstone",
                    zh: "",
                    source: "",
                    sourceEn: "Game of Thrones",
                },
                {
                    en: "The night is dark and full of terrors",
                    zh: "",
                    source: "",
                    sourceEn: "Game of Thrones",
                },
                {
                    en: "What is dead may never die",
                    zh: "",
                    source: "",
                    sourceEn: "Game of Thrones",
                },
                {
                    en: "No cost too great",
                    zh: "",
                    source: " - ",
                    sourceEn: "Hollow Knight - The Pale King",
                },
                {
                    en: "Higher beings, these words are for you alone",
                    zh: "",
                    source: " - ",
                    sourceEn: "Hollow Knight - Ancient Tablets",
                },
                {
                    en: "No more dreams",
                    zh: "",
                    source: " - ",
                    sourceEn: "Hollow Knight - The Knight",
                },
                {
                    en: "Take care of yourself out there",
                    zh: "",
                    source: " - ",
                    sourceEn: "Hollow Knight - Elderbug",
                },
                {
                    en: "Our light shall blaze from its dark sun",
                    zh: "",
                    source: " - ",
                    sourceEn: "Hollow Knight - Radiance",
                },
                {
                    en: "You wield your nail like a club",
                    zh: "",
                    source: " - ",
                    sourceEn: "Hollow Knight - Sly",
                },
                {
                    en: "So it can access a mind, then the weakness of the mind is revealed",
                    zh: "",
                    source: " - ",
                    sourceEn: "Hollow Knight - Seer",
                },
                {
                    en: "Tiny squib, you approach fearless. Are you a hunter like me?",
                    zh: "",
                    source: " - ",
                    sourceEn: "Hollow Knight - The Hunter",
                },
                {
                    en: "The path is opened. One way or another, an end awaits inside",
                    zh: "",
                    source: " - ",
                    sourceEn: "Hollow Knight - Hornet",
                },
                {
                    en: "No mind to think. No will to break. No voice to cry suffering. Born of God and Void",
                    zh: "",
                    source: " - ",
                    sourceEn: "Hollow Knight - The Pale King",
                },
                {
                    en: "Soul of Wyrm. Soul of Root. Heart of Void",
                    zh: "",
                    source: " - ",
                    sourceEn: "Hollow Knight - The Pale King",
                },
                {
                    en: "You shall seal the blinding light that plagues their dreams. You are the Vessel. You are the Hollow Knight",
                    zh: "",
                    source: " - ",
                    sourceEn: "Hollow Knight - The Pale King",
                },
                {
                    en: "The Pilgrim's way. Travellers of Hallownest, descend through verdant wilds and fungal groves to the city at this kingdom's heart. There all wishes shall be granted, all truths revealed",
                    zh: "",
                    source: " - ",
                    sourceEn: "Hollow Knight - Stone Tablet",
                },
                {
                    en: "Wanderers seeking death, welcome. May you find swift end upon our claws",
                    zh: "",
                    source: " - ",
                    sourceEn: "Hollow Knight - Mantis Lords",
                },
                {
                    en: "The great gates have been sealed. None shall enter. None shall leave",
                    zh: "",
                    source: " - ",
                    sourceEn: "Hollow Knight - City of Tears Tablet",
                },
                {
                    en: "Through its sacrifice Hallownest lasts eternal",
                    zh: "",
                    source: " - ",
                    sourceEn: "Hollow Knight - Hollow Knight Memorial",
                },
                {
                    en: "Protect yourself You are our last",
                    zh: "",
                    source: " - ",
                    sourceEn: "Hollow Knight - Dreamshield Totem",
                },
                {
                    en: "To witness secrets sealed, one must endure the harshest punishment",
                    zh: "",
                    source: " - ",
                    sourceEn: "Hollow Knight - Path of Pain",
                },
                {
                    en: "Ho there, traveller. I'm afraid there's only me left to offer welcome. Our town's fallen quiet you see. The other residents, they've all disappeared. Headed down that well, one by one, into the caverns below",
                    zh: "",
                    source: " - ",
                    sourceEn: "Hollow Knight - Elderbug",
                },
                {
                    en: "The ordinary days we experience may actually be a series of continuous miracles",
                    zh: "",
                    source: "",
                    sourceEn: "Nichijou",
                },
                {
                    en: "We live in the moment; we are creatures who exist in the moment",
                    zh: "",
                    source: "",
                    sourceEn: "Nichijou",
                },
                {
                    en: "I like the way you die, boy",
                    zh: "",
                    source: "",
                    sourceEn: "Django Unchained",
                },
                {
                    en: "Revenge is a dish best served cold",
                    zh: "",
                    source: "",
                    sourceEn: "Kill Bill",
                },
                {
                    en: "Say 'what' again. I dare you, I double dare you motherf***er, say what one more Goddamn time!",
                    zh: "''''",
                    source: "",
                    sourceEn: "Pulp Fiction",
                },
                {
                    en: "It's a deal, it's a steal, it's the sale of the fucking century!",
                    zh: "",
                    source: "",
                    sourceEn: "Lock, Stock and Two Smoking Barrels",
                },
                {
                    en: "If the milk turns out to be sour, I ain't the kind of pussy to drink it",
                    zh: "",
                    source: "",
                    sourceEn: "Lock, Stock and Two Smoking Barrels",
                },
                {
                    en: "Do you know what 'nemesis' means?",
                    zh: "''",
                    source: "",
                    sourceEn: "Snatch",
                },
                {
                    en: "You should never underestimate the predictability of stupidity",
                    zh: "",
                    source: "",
                    sourceEn: "Snatch",
                },
                {
                    en: "Heavy is good, heavy is reliable. If it doesn't work, you can always hit them with it",
                    zh: "",
                    source: "",
                    sourceEn: "Snatch",
                },
                {
                    en: "There's fuckery afoot",
                    zh: "",
                    source: "",
                    sourceEn: "The Gentlemen",
                },
                {
                    en: "If you wish to be the king of the jungle, it's not enough to act like a king. You must be the king",
                    zh: "",
                    source: "",
                    sourceEn: "The Gentlemen",
                },
                {
                    en: "In the jungle, the only way a lion survives is not by acting like a king, but by being the king",
                    zh: "",
                    source: "",
                    sourceEn: "The Gentlemen",
                }, // Cyberpunk: Edgerunners
                {
                    en: "You gotta live your own life",
                    zh: "",
                    source: "",
                    sourceEn: "Cyberpunk: Edgerunners",
                },
                {
                    en: "You're a natural-born Edgerunner",
                    zh: "",
                    source: "",
                    sourceEn: "Cyberpunk: Edgerunners",
                },
                {
                    en: "Night City won't change, but you can choose not to be swallowed by it",
                    zh: "",
                    source: "",
                    sourceEn: "Cyberpunk: Edgerunners",
                },
                {
                    en: "We're all children of Night City",
                    zh: "",
                    source: "",
                    sourceEn: "Cyberpunk: Edgerunners",
                },
                {
                    en: "As long as you're alive, there's hope",
                    zh: "",
                    source: "",
                    sourceEn: "Cyberpunk: Edgerunners",
                },
                // Special trigger quote for easter egg
                {
                    en: "You're a natural-born Edgerunner.",
                    zh: "",
                    source: "",
                    sourceEn: "Cyberpunk: Edgerunners",
                },
            ];

            // Create structured quotes for each language
            const quotes = {
                english: quotesData.map((q) => ({
                    en: q.en,
                    zh: q.zh,
                    source: q.sourceEn || q.source,
                    sourceEn: q.sourceEn,
                })),
                chinese: quotesData.map((q) => ({
                    en: q.en,
                    zh: q.zh,
                    source: q.source,
                    sourceEn: q.sourceEn,
                })),
            };

            // Current quotes displayed in each card
            let currentQuotes = [0, 1, 2];

            // Initialize current quotes based on language
            function initializeQuotes() {
                // Set initial quote indices to match the hardcoded cards
                // These correspond to specific quotes in our quotes array
                const initialIndices = {
                    english: [83, 89, 1], // Game of Thrones "night is dark", Black Books "hangover", Zhang Ailing "life is a robe"
                    chinese: [83, 89, 1],
                };
                currentQuotes = initialIndices.english; // Start with English indices
            }

            // New Phoebe easter egg system
            // Each easter egg has a permanent state (true once triggered, never resets)
            let easterEggTriggered = {
                langToggle: false, // they-dont-know-that-we-know-they-know-we-know
                pengClick: false, // do-you-have-a-plan-i-dont-even-have-a-pla
                tributeClick: false, // see-hes-her-lobster
                essenceCard: false, // that-is-brand-new-information-breaking-news-new-information-expected-not-surprised-phoebe-meme-friends-101soundboards.mp3
                phoebeWisdom: false, // i-wish-i-could-but-i-dont-want-to-101soundboards.mp3
            };

            let clickCounters = {
                langToggle: 0, // cumulative counter
                pengClick: 0, // rapid click counter
                tributeClick: 0, // rapid click counter
                essenceCard: 0, // rapid click counter
                phoebeWisdom: 0, // rapid click counter
            };

            let clickTimers = {
                langToggle: null,
                pengClick: null,
                tributeClick: null,
                essenceCard: null,
                phoebeWisdom: null,
            };

            let keySequence = [];
            let keyTimer = null;
            let whoSingingTimer = null;
            let isListeningForYou = false;

            // Rick portal keyboard tracking variables
            let rickKeySequence = [];
            let rickKeyTimer = null;
            let rickPortalTriggered = false;

            // Pickle Rick keyboard tracking variables
            let pickleRickKeySequence = [];
            let pickleRickKeyTimer = null;
            let pickleRickTriggered = false;

            // Cyberpunk 2077 Easter Egg variables
            let cyberpunkEasterEggTriggered = false;
            let cyberpunkAudio = null;
            let isAudioPlaying = false;

            // Auto click variables
            let autoClickRunning = false;
            let autoClickInterval = null;
            let currentAutoClickIndex = 0;

            // Function to change quote in a card
            function changeQuote(cardIndex) {
                const activeQuotes = isEnglish
                    ? quotes.english
                    : quotes.chinese;
                let newQuoteIndex;
                do {
                    newQuoteIndex = Math.floor(
                        Math.random() * activeQuotes.length,
                    );
                } while (newQuoteIndex === currentQuotes[cardIndex]);

                currentQuotes[cardIndex] = newQuoteIndex;
                const quote = activeQuotes[newQuoteIndex];

                // Update the current language version
                const currentCards = document.querySelectorAll(
                    isEnglish
                        ? "#englishContent .essence-card"
                        : "#chineseContent .essence-card",
                );

                if (currentCards[cardIndex]) {
                    const titleEl =
                        currentCards[cardIndex].querySelector(".essence-title");
                    const descEl =
                        currentCards[cardIndex].querySelector(".essence-desc");

                    if (isEnglish) {
                        titleEl.textContent = quote.en;
                        descEl.textContent = quote.source;
                    } else {
                        titleEl.textContent = quote.zh;
                        descEl.textContent = quote.source;
                    }
                }

                // Re-adapt font sizes after quote change
                setTimeout(() => {
                    adaptFontSizeResponsive();
                }, 50);

                // Check for Cyberpunk 2077 Easter Egg
                setTimeout(() => {
                    checkCyberpunkEasterEgg();
                }, 100);
            }

            // Function to copy quote text
            function copyQuoteText(element) {
                const text = element.textContent;
                copyToClipboard(text);
            }

            // Make all text elements clickable for copying
            function makeTextClickable() {
                const textSelectors =
                    ".quote-text, .quote-author, .meditation-text, .phoebe-quote, .phoebe-title, .final-text";
                document.querySelectorAll(textSelectors).forEach((element) => {
                    element.addEventListener("click", function () {
                        copyToClipboard(this.textContent);
                    });
                    element.style.cursor = "pointer";
                    element.style.userSelect = "text";
                });
            }

            // Zima Blue squares system
            let zimaSquares = [];
            let zimaTimer = null;

            function createZimaSquare() {
                // Don't create squares if cyberpunk easter egg is active
                if (cyberpunkEasterEggTriggered) {
                    return;
                }

                const square = document.createElement("div");

                // Random size variation
                const sizeRandom = Math.random();
                let sizeClass = "zima-square";
                let squareSize = 12;

                if (sizeRandom < 0.4) {
                    sizeClass += " zima-square-small";
                    squareSize = 8;
                } else if (sizeRandom < 0.8) {
                    // Default size
                    squareSize = 12;
                } else if (sizeRandom < 0.95) {
                    sizeClass += " zima-square-large";
                    squareSize = 16;
                } else {
                    sizeClass += " zima-square-xl";
                    squareSize = 20;
                }

                square.className = sizeClass;

                // Random position on screen, accounting for square size
                const x = Math.random() * (window.innerWidth - squareSize);
                const y = Math.random() * (window.innerHeight - squareSize);

                square.style.left = x + "px";
                square.style.top = y + "px";

                // Fixed Zima Blue color: RGB(91, 194, 231) = #5BC2E7
                square.style.background = "#5BC2E7";

                document.body.appendChild(square);
                zimaSquares.push(square);

                // Schedule next square (only if cyberpunk easter egg is not active)
                if (!cyberpunkEasterEggTriggered) {
                    scheduleNextZimaSquare();
                }
            }

            function scheduleNextZimaSquare() {
                // Don't schedule if cyberpunk easter egg is active
                if (cyberpunkEasterEggTriggered) {
                    return;
                }

                // Gradually decrease interval as more squares appear
                const baseInterval = Math.max(
                    2000,
                    8000 - zimaSquares.length * 50,
                );
                const randomVariation = Math.random() * baseInterval * 0.5;
                const interval = baseInterval + randomVariation;

                zimaTimer = setTimeout(createZimaSquare, interval);
            }

            function startZimaBlueSystem() {
                // Don't start if cyberpunk easter egg is active
                if (cyberpunkEasterEggTriggered) {
                    return;
                }

                // Start the first square after a random delay
                const initialDelay = Math.random() * 10000 + 5000; // 5-15 seconds
                zimaTimer = setTimeout(createZimaSquare, initialDelay);
            }

            function stopZimaBlueSystem() {
                // Clear the timer
                if (zimaTimer) {
                    clearTimeout(zimaTimer);
                    zimaTimer = null;
                }

                // Remove all existing squares
                zimaSquares.forEach(square => {
                    if (square && square.parentNode) {
                        square.parentNode.removeChild(square);
                    }
                });
                zimaSquares = [];
            }

            // Cyberpunk 2077 Easter Egg functions
            function checkCyberpunkEasterEgg() {
                if (cyberpunkEasterEggTriggered) {
                    return;
                }

                const currentCards = document.querySelectorAll(
                    isEnglish
                        ? "#englishContent .essence-card"
                        : "#chineseContent .essence-card",
                );

                const targetTextEn = "You're a natural-born Edgerunner.";
                const targetTextZh = "";
                const targetText = isEnglish ? targetTextEn : targetTextZh;

                let matchCount = 0;
                currentCards.forEach(card => {
                    const titleEl = card.querySelector(".essence-title");
                    if (titleEl && titleEl.textContent.trim() === targetText) {
                        matchCount++;
                    }
                });

                if (matchCount === 3) {
                    console.log(" Cyberpunk 2077 Easter Egg triggered!");
                    triggerCyberpunkEasterEgg();
                }
            }

            function triggerCyberpunkEasterEgg() {
                if (cyberpunkEasterEggTriggered) {
                    return;
                }

                cyberpunkEasterEggTriggered = true;

                // Stop Zima Blue system
                stopZimaBlueSystem();

                // Add cyberpunk mode to body
                document.body.classList.add('cyberpunk-mode');

                // Show easter egg overlay
                const easterEgg = document.getElementById('cyberpunkEasterEgg');
                const audioBtn = document.getElementById('audioControlBtn');

                if (easterEgg) {
                    easterEgg.classList.add('show');

                    // Add click listener to background to close
                    setTimeout(() => {
                        easterEgg.addEventListener('click', function(e) {
                            if (e.target === easterEgg) {
                                closeCyberpunkEasterEgg();
                            }
                        });
                    }, 500);
                }

                // Show and then hide controls during fullscreen display
                const audioPanel = document.getElementById('audioControlPanel');
                const closeBtn = document.getElementById('closeEasterEgg');

                if (audioPanel) {
                    audioPanel.classList.add('show'); // First show the panel
                    audioPanel.classList.add('hidden-during-fullscreen'); // Then hide it during fullscreen
                }

                if (closeBtn) {
                    closeBtn.classList.add('show'); // Make sure it's marked as should be shown
                    closeBtn.classList.add('hidden-during-fullscreen');
                }

                // Initialize button state first
                updateAudioButton();

                // Start playing audio
                startCyberpunkAudio();

                // Show controls after a delay (after fullscreen display)
                setTimeout(() => {
                    if (audioPanel) {
                        audioPanel.classList.remove('hidden-during-fullscreen');
                        // Ensure audio panel stays visible permanently after first trigger
                        audioPanel.classList.add('show');
                    }
                    if (closeBtn) {
                        closeBtn.classList.remove('hidden-during-fullscreen');
                        // Ensure close button stays visible permanently after first trigger
                        closeBtn.classList.add('show');
                    }
                }, 4000); // Show controls after 4 seconds
            }

            function startCyberpunkAudio() {
                cyberpunkAudio = document.getElementById('cyberpunkAudio');

                if (cyberpunkAudio) {
                    cyberpunkAudio.volume = 0.3; // Set volume to 30%
                    isAudioPlaying = false; // Set initial state
                    updateAudioButton(); // Update button to show play state

                    cyberpunkAudio.play().then(() => {
                        console.log(" Cyberpunk audio started playing");
                        isAudioPlaying = true;
                        updateAudioButton();
                    }).catch(error => {
                        console.log(" Audio play failed:", error);
                        // Try to play after user interaction
                        document.addEventListener('click', function tryPlay() {
                            cyberpunkAudio.play().then(() => {
                                console.log(" Cyberpunk audio started after user interaction");
                                isAudioPlaying = true;
                                updateAudioButton();
                                document.removeEventListener('click', tryPlay);
                            }).catch(e => {
                                console.log(" Audio still failed:", e);
                            });
                        }, { once: true });
                    });
                }
            }

            function setupAudioControl() {
                const audioBtn = document.getElementById('audioControlBtn');

                if (audioBtn && !audioBtn.hasAttribute('data-initialized')) {
                    audioBtn.addEventListener('click', toggleAudio);
                    audioBtn.setAttribute('data-initialized', 'true');
                }
            }

            function setupCloseButton() {
                const closeBtn = document.getElementById('closeEasterEgg');

                if (closeBtn && !closeBtn.hasAttribute('data-initialized')) {
                    closeBtn.addEventListener('click', closeCyberpunkEasterEgg);
                    closeBtn.setAttribute('data-initialized', 'true');
                }
            }

            function closeCyberpunkEasterEgg() {
                console.log(" Closing Cyberpunk Easter Egg");

                // Hide easter egg overlay only
                const easterEgg = document.getElementById('cyberpunkEasterEgg');
                const audioPanel = document.getElementById('audioControlPanel');
                const closeBtn = document.getElementById('closeEasterEgg');

                if (easterEgg) {
                    easterEgg.classList.remove('show');
                }

                // Just hide the fullscreen overlay, keep controls visible
                if (audioPanel && audioPanel.classList.contains('hidden-during-fullscreen')) {
                    audioPanel.classList.remove('hidden-during-fullscreen');
                }

                if (closeBtn && closeBtn.classList.contains('hidden-during-fullscreen')) {
                    closeBtn.classList.remove('hidden-during-fullscreen');
                }

                // Keep audio playing and controls visible
                // Remove cyberpunk mode from body
                document.body.classList.remove('cyberpunk-mode');

                // Don't reset easter egg state - keep it triggered so buttons stay visible
                // Don't restart Zima Blue system - keep it stopped permanently
            }

            function toggleAudio() {
                if (!cyberpunkAudio) {
                    return;
                }

                if (isAudioPlaying) {
                    cyberpunkAudio.pause();
                    isAudioPlaying = false;
                    console.log(" Audio paused");
                } else {
                    cyberpunkAudio.play().then(() => {
                        isAudioPlaying = true;
                        console.log(" Audio resumed");
                    }).catch(error => {
                        console.log(" Audio resume failed:", error);
                    });
                }

                updateAudioButton();
            }

            function updateAudioButton() {
                const audioBtn = document.getElementById('audioControlBtn');
                const audioStatus = document.querySelector('.audio-status');

                if (audioBtn) {
                    audioBtn.textContent = isAudioPlaying ? '' : '';
                }

                if (audioStatus) {
                    audioStatus.textContent = isAudioPlaying ? 'PLAYING' : 'PAUSED';
                }
            }

            // Add keyboard shortcut to close easter egg
            document.addEventListener('keydown', function(e) {
                if (cyberpunkEasterEggTriggered && e.key === 'Escape') {
                    closeCyberpunkEasterEgg();
                }
            });

            // Debug Panel functionality
            let debugPanelVisible = false;

            function setupDebugPanel() {
                const debugToggle = document.getElementById('debugToggle');
                const debugPanel = document.getElementById('debugPanel');
                const autoClickBtn = document.getElementById('autoClickBtn');

                if (debugToggle && debugPanel) {
                    debugToggle.addEventListener('click', function() {
                        debugPanelVisible = !debugPanelVisible;
                        if (debugPanelVisible) {
                            debugPanel.classList.add('show');
                            updateDebugInfo();
                        } else {
                            debugPanel.classList.remove('show');
                        }
                    });

                    // Update debug info every 2 seconds when visible
                    setInterval(() => {
                        if (debugPanelVisible) {
                            updateDebugInfo();
                        }
                    }, 2000);
                }

                if (autoClickBtn) {
                    autoClickBtn.addEventListener('click', toggleAutoClick);
                }
            }

            function updateDebugInfo() {
                const quotesList = document.getElementById('quotesList');
                if (!quotesList) return;

                const currentCards = document.querySelectorAll(
                    isEnglish
                        ? "#englishContent .essence-card"
                        : "#chineseContent .essence-card",
                );

                const targetText = isEnglish
                    ? "You're a natural-born Edgerunner."
                    : "";

                let html = '';
                let matchCount = 0;

                currentCards.forEach((card, index) => {
                    const titleEl = card.querySelector(".essence-title");
                    const title = titleEl ? titleEl.textContent.trim() : '';
                    const isMatch = title === targetText;
                    const isCurrentTarget = autoClickRunning && index === currentAutoClickIndex;

                    if (isMatch) matchCount++;

                    html += `<p style="color: ${isMatch ? '#00ff00' : '#ff6b6b'}; ${isCurrentTarget ? 'background: rgba(255, 255, 0, 0.2); padding: 0.2rem; border-radius: 3px;' : ''}">
                        Card ${index + 1}: ${isMatch ? '' : ''} ${isCurrentTarget ? '' : ''}<br/>
                        <small>"${title.substring(0, 25)}${title.length > 25 ? '...' : ''}"</small>
                    </p>`;
                });

                html += `<p style="color: #00ffff; font-weight: bold; margin-top: 0.5rem;">
                    Progress: ${matchCount}/3 cards match
                </p>`;

                if (autoClickRunning) {
                    html += `<p style="color: #ffd700; font-weight: bold; font-size: 0.75rem;">
                         Auto-clicking card ${currentAutoClickIndex + 1}...
                    </p>`;
                }

                if (matchCount === 3) {
                    html += `<p style="color: #00ff00; font-weight: bold; animation: pulse 1s infinite;">
                         Easter egg will trigger soon!
                    </p>`;
                }

                quotesList.innerHTML = html;
            }

            function toggleAutoClick() {
                const autoClickBtn = document.getElementById('autoClickBtn');

                if (!autoClickRunning) {
                    startAutoClick();
                    autoClickBtn.textContent = ' Stop Auto';
                    autoClickBtn.classList.add('running');
                } else {
                    stopAutoClick();
                    autoClickBtn.textContent = ' Auto Click';
                    autoClickBtn.classList.remove('running');
                }
            }

            function startAutoClick() {
                if (autoClickRunning || cyberpunkEasterEggTriggered) {
                    return;
                }

                console.log(" Starting auto click...");
                autoClickRunning = true;
                currentAutoClickIndex = 0;

                // Start immediately, then use variable intervals
                performAutoClick();
            }

            function stopAutoClick() {
                if (autoClickInterval) {
                    clearInterval(autoClickInterval);
                    autoClickInterval = null;
                }
                autoClickRunning = false;
                currentAutoClickIndex = 0;
                console.log(" Auto click stopped");

                // Reset button appearance
                const autoClickBtn = document.getElementById('autoClickBtn');
                if (autoClickBtn && !cyberpunkEasterEggTriggered) {
                    autoClickBtn.textContent = ' Auto Click';
                    autoClickBtn.classList.remove('running');
                    autoClickBtn.style.background = '';
                    autoClickBtn.style.borderColor = '';
                    autoClickBtn.style.color = '';
                }
            }

            function performAutoClick() {
                if (!autoClickRunning || cyberpunkEasterEggTriggered) {
                    stopAutoClick();
                    return;
                }

                const currentCards = document.querySelectorAll(
                    isEnglish
                        ? "#englishContent .essence-card"
                        : "#chineseContent .essence-card",
                );

                const targetText = isEnglish
                    ? "You're a natural-born Edgerunner."
                    : "";

                // Check current card
                const currentCard = currentCards[currentAutoClickIndex];
                if (!currentCard) {
                    stopAutoClick();
                    return;
                }

                const titleEl = currentCard.querySelector(".essence-title");
                const currentText = titleEl ? titleEl.textContent.trim() : '';

                console.log(` Auto-click [${currentAutoClickIndex + 1}/3]: "${currentText.substring(0, 30)}..."`);

                if (currentText === targetText) {
                    // Current card matches, move to next with celebration
                    console.log(` Card ${currentAutoClickIndex + 1} matches! Moving to next...`);

                    // Add success visual feedback
                    currentCard.style.border = '2px solid #00ff00';
                    currentCard.style.boxShadow = '0 0 15px rgba(0, 255, 0, 0.5)';
                    setTimeout(() => {
                        currentCard.style.border = '';
                        currentCard.style.boxShadow = '';
                    }, 1000);

                    currentAutoClickIndex++;

                    if (currentAutoClickIndex >= 3) {
                        // Check if all cards match
                        checkAllCardsAndComplete(currentCards, targetText);
                    } else {
                        // Move to next card with a short delay
                        setTimeout(() => {
                            if (autoClickRunning) {
                                performAutoClick();
                            }
                        }, 600);
                    }
                } else {
                    // Click the current card to change its quote
                    console.log(` Clicking card ${currentAutoClickIndex + 1} to change quote...`);

                    // Enhanced visual feedback
                    currentCard.style.transform = 'scale(0.95)';
                    currentCard.style.border = '2px solid #ffff00';
                    currentCard.style.boxShadow = '0 0 15px rgba(255, 255, 0, 0.5)';

                    setTimeout(() => {
                        currentCard.style.transform = '';
                        currentCard.style.border = '';
                        currentCard.style.boxShadow = '';
                    }, 300);

                    currentCard.click();

                    // Schedule next click with random delay for natural feeling
                    const delay = 600 + Math.random() * 400; // 600-1000ms
                    setTimeout(() => {
                        if (autoClickRunning) {
                            performAutoClick();
                        }
                    }, delay);
                }
            }

            function checkAllCardsAndComplete(currentCards, targetText) {
                let matchCount = 0;
                currentCards.forEach(card => {
                    const title = card.querySelector(".essence-title");
                    if (title && title.textContent.trim() === targetText) {
                        matchCount++;
                    }
                });

                if (matchCount === 3) {
                    console.log(" Mission accomplished! All cards match!");
                    stopAutoClick();
                    const autoClickBtn = document.getElementById('autoClickBtn');
                    if (autoClickBtn) {
                        autoClickBtn.textContent = ' Success!';
                        autoClickBtn.classList.remove('running');
                        autoClickBtn.style.background = 'rgba(0, 255, 0, 0.3)';
                        autoClickBtn.style.borderColor = '#00ff00';
                        autoClickBtn.style.color = '#00ff00';
                    }

                    // Show celebration effect
                    currentCards.forEach((card, index) => {
                        setTimeout(() => {
                            card.style.border = '2px solid #00ff00';
                            card.style.boxShadow = '0 0 20px rgba(0, 255, 0, 0.8)';
                            card.style.transform = 'scale(1.05)';

                            setTimeout(() => {
                                card.style.border = '';
                                card.style.boxShadow = '';
                                card.style.transform = '';
                            }, 1500);
                        }, index * 200);
                    });
                } else {
                    // Not all match yet, restart from first card
                    console.log(` Only ${matchCount}/3 cards match. Restarting...`);
                    currentAutoClickIndex = 0;
                    setTimeout(() => {
                        if (autoClickRunning) {
                            performAutoClick();
                        }
                    }, 800);
                }
            }

            // Handle window resize to reposition squares if needed
            window.addEventListener("resize", function () {
                zimaSquares.forEach((square) => {
                    const rect = square.getBoundingClientRect();
                    if (
                        rect.right > window.innerWidth ||
                        rect.bottom > window.innerHeight
                    ) {
                        const maxX =
                            window.innerWidth -
                            parseInt(square.style.width || 12);
                        const maxY =
                            window.innerHeight -
                            parseInt(square.style.height || 12);
                        square.style.left = Math.min(rect.left, maxX) + "px";
                        square.style.top = Math.min(rect.top, maxY) + "px";
                    }
                });
            });

            // Initialize quotes and clickable text
            document.addEventListener("DOMContentLoaded", function () {
                // Initialize with random quotes
                for (let i = 0; i < 3; i++) {
                    changeQuote(i);
                }
                makeTextClickable();

                // Start Zima Blue system
                startZimaBlueSystem();

                // Setup debug panel
                setupDebugPanel();

                // Setup permanent audio controls (always available after page load)
                setTimeout(() => {
                    setupAudioControl();
                    setupCloseButton();
                }, 100);

                // Note: Close button will only be shown after easter egg is triggered
            });

            // Easter egg: clicking the circle 7 times shows a Phoebe quote
            let clickCount = 0;
            let phoebeAnimationCount = 0;

            // Easter egg event listeners - using event delegation for maximum stability
            let easterEggEventsInitialized = false;
            let colorCircleEventCount = 0;

            function initializeEasterEggEvents() {
                if (easterEggEventsInitialized) {
                    console.log(
                        " Easter egg events already initialized, skipping...",
                    );
                    return;
                }
                easterEggEventsInitialized = true;

                console.log(
                    " Initializing easter egg events with event delegation...",
                );
                console.log(
                    " Adding single document-level event listener...",
                );

                // Use event delegation on document to catch all events
                document.addEventListener("click", function (e) {
                    const target = e.target;
                    const currentTarget = e.currentTarget;

                    // 2. Peng triple click - target any .final-text element
                    if (
                        target.classList.contains("final-text") ||
                        target.closest(".final-text")
                    ) {
                        const pengElement = target.classList.contains(
                            "final-text",
                        )
                            ? target
                            : target.closest(".final-text");
                        console.log(
                            " Peng clicked! Element:",
                            pengElement.textContent,
                        );
                        e.stopPropagation();
                        handleTripleClick(
                            "pengClick",
                            "do-you-have-a-plan.mp3",
                            isEnglish
                                ? "I don't even have a 'pla'."
                                : "",
                        );
                        return;
                    }

                    // 3. Tribute text triple click - target any .tribute element
                    if (
                        target.classList.contains("tribute") ||
                        target.closest(".tribute")
                    ) {
                        const tributeElement = target.classList.contains(
                            "tribute",
                        )
                            ? target
                            : target.closest(".tribute");
                        console.log(
                            " Tribute clicked! Element:",
                            tributeElement.textContent,
                        );
                        e.stopPropagation();
                        handleTripleClick(
                            "tributeClick",
                            "see-hes-her-lobster.mp3",
                            isEnglish
                                ? "See? He's her lobster!"
                                : "",
                        );
                        return;
                    }

                    // 4. Essence cards triple click
                    if (
                        target.classList.contains("essence-card") ||
                        target.closest(".essence-card")
                    ) {
                        // Don't interfere with the original quote change functionality
                        const isQuoteClick =
                            target.classList.contains("quote-clickable");
                        if (!isQuoteClick) {
                            console.log(
                                " Essence card clicked for easter egg",
                            );
                            handleTripleClick(
                                "essenceCard",
                                "that-is-brand-new-information.mp3",
                                isEnglish
                                    ? "That is brand new information!"
                                    : "",
                            );
                        }
                        return;
                    }

                    // 5. Phoebe wisdom section triple click
                    if (
                        target.classList.contains("phoebe-title") ||
                        target.closest(".phoebe-title")
                    ) {
                        console.log(" Phoebe title clicked!");
                        handleTripleClick(
                            "phoebeWisdom",
                            "i-wish-i-could.mp3",
                            isEnglish
                                ? "Oh, I wish I could, but I don't want to."
                                : "",
                        );
                        return;
                    }

                    // 6. Color circle - final easter egg
                    if (
                        target.classList.contains("color-circle") ||
                        target.closest(".color-circle")
                    ) {
                        colorCircleEventCount++;
                        console.log(
                            ` Color circle clicked! (Event #${colorCircleEventCount})`,
                        );
                        console.log(" Click target:", target);
                        console.log(" Target classes:", target.className);
                        console.log(
                            " Current language:",
                            isEnglish ? "English" : "Chinese",
                        );

                        // Prevent any other click handlers immediately
                        e.preventDefault();
                        e.stopPropagation();
                        e.stopImmediatePropagation();

                        // Debounce mechanism to prevent multiple rapid calls
                        if (!window.colorCircleProcessing) {
                            window.colorCircleProcessing = true;
                            console.log(" Processing color circle click...");

                            triggerWhoSinging();

                            // Reset processing flag after a short delay
                            setTimeout(() => {
                                window.colorCircleProcessing = false;
                                console.log(
                                    " Color circle processing flag reset",
                                );
                            }, 1000);
                        } else {
                            console.log(
                                " Color circle click ignored (already processing)",
                            );
                        }
                        return;
                    }
                });
            }

            // Initialize easter egg events immediately (only once)
            console.log(" About to initialize easter egg events...");
            initializeEasterEggEvents();

            // Prevent any additional initialization
            window.easterEggSystemInitialized = true;

            function handleTripleClick(eggType, audioFile, message) {
                clickCounters[eggType]++;
                console.log(
                    ` ${eggType} clicked, count: ${clickCounters[eggType]}`,
                );
                console.log(` Audio file: ${audioFile}`);
                console.log(` Message: ${message}`);

                // Reset timer
                if (clickTimers[eggType]) {
                    clearTimeout(clickTimers[eggType]);
                    console.log(` ${eggType} timer cleared`);
                }

                // Set timer to reset counter after 1 second
                clickTimers[eggType] = setTimeout(() => {
                    console.log(` ${eggType} counter reset to 0 (timeout)`);
                    clickCounters[eggType] = 0;
                }, 1000);

                // Check if triple clicked
                if (clickCounters[eggType] === 3) {
                    console.log(` ${eggType} easter egg triggered!`);
                    easterEggTriggered[eggType] = true;
                    console.log(` Playing audio: ${audioFile}`);
                    playAudio(audioFile);
                    showEasterEggNotification(message);
                    clickCounters[eggType] = 0;
                }
            }

            function triggerWhoSinging() {
                console.log(" triggerWhoSinging() called");
                console.log(
                    " Current language:",
                    isEnglish ? "English" : "Chinese",
                );

                // Check if all easter eggs have been triggered
                const eggStates = Object.entries(easterEggTriggered);
                console.log(" Detailed easter egg states:");
                eggStates.forEach(([key, value]) => {
                    console.log(`  ${key}: ${value ? "" : ""}`);
                });

                const allTriggered = Object.values(easterEggTriggered).every(
                    (state) => state,
                );

                console.log(" All easter eggs triggered:", allTriggered);
                console.log(
                    " Raw easter egg object:",
                    JSON.stringify(easterEggTriggered),
                );

                if (allTriggered) {
                    console.log(
                        " ALL CONDITIONS MET! Triggering 'Who's singing?' easter egg",
                    );
                    console.log(" About to play who-singing.mp3");
                    playAudio("who-singing.mp3");

                    const message = isEnglish ? "Who's singing?" : "";
                    console.log(" Showing notification:", message);
                    showEasterEggNotification(message);

                    // Start listening for "you" input
                    isListeningForYou = true;
                    keySequence = [];
                    console.log(
                        " Now listening for 'you' input for 5 seconds...",
                    );

                    // Stop listening after 5 seconds
                    if (whoSingingTimer) {
                        clearTimeout(whoSingingTimer);
                    }
                    whoSingingTimer = setTimeout(() => {
                        console.log(
                            " 'You' input timeout - stopped listening",
                        );
                        isListeningForYou = false;
                        keySequence = [];
                    }, 5000);
                } else {
                    const missingEggs = Object.entries(easterEggTriggered)
                        .filter(([key, value]) => !value)
                        .map(([key]) => key);
                    console.log(
                        " Not all easter eggs triggered yet. Missing:",
                        missingEggs,
                    );
                    console.log(
                        ` Progress: ${5 - missingEggs.length}/5 easter eggs completed`,
                    );
                    console.log(
                        " You need to trigger these easter eggs first:",
                        missingEggs.join(", "),
                    );
                }
            }

            function showSmellyCatContent() {
                console.log(" Showing Smelly Cat content first");
                playAudio("smelly_cat.mp3");

                // Create Smelly Cat overlay
                const smellyCatOverlay = document.createElement("div");
                smellyCatOverlay.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100vw;
                    height: 100vh;
                    background: linear-gradient(45deg,
                        rgba(255, 192, 203, 0.9),
                        rgba(254, 235, 234, 0.9),
                        rgba(255, 255, 255, 0.9)
                    );
                    z-index: 20000;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    backdrop-filter: blur(20px);
                    animation: fadeIn 1s ease-out;
                `;

                const smellyCatContent = document.createElement("div");
                smellyCatContent.style.cssText = `
                    text-align: center;
                    color: #333;
                    font-family: "Great Vibes", cursive;
                    max-width: 80vw;
                `;

                const smellyCatTitle = " Smelly Cat ";
                const smellyCatText = isEnglish
                    ? "Smelly Cat, smelly cat<br>What are they feeding you?<br>Smelly cat, smelly cat<br>It's not your fault.<br>They won't take you to the vet<br>You're obviously not their favorite pet<br>You may not be a bed of roses<br>And you're no friend to those with noses"
                    : "<br><br><br><br><br><br><br>";

                smellyCatContent.innerHTML = `
                    <h1 style="font-size: 4rem; margin-bottom: 2rem; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">
                        ${smellyCatTitle}
                    </h1>
                    <p style="font-family: 'Dancing Script', cursive; font-size: 2rem; line-height: 1.6; margin-bottom: 3rem;">
                        ${smellyCatText}
                    </p>
                    <p style="font-family: 'Dancing Script', cursive; font-size: 1.8rem; margin-top: 2rem; font-weight: bold;">
                        ~?
                    </p>
                `;

                smellyCatOverlay.appendChild(smellyCatContent);
                document.body.appendChild(smellyCatOverlay);

                // After 8 seconds, transition to Friends typing effect
                setTimeout(() => {
                    smellyCatOverlay.style.animation =
                        "fadeOut 1s ease-out forwards";
                    setTimeout(() => {
                        if (document.body.contains(smellyCatOverlay)) {
                            document.body.removeChild(smellyCatOverlay);
                        }
                        showFriendsTypingEffect();
                    }, 1000);
                }, 8000);

                // Click to skip to typing effect
                smellyCatOverlay.addEventListener("click", () => {
                    smellyCatOverlay.style.animation =
                        "fadeOut 0.5s ease-out forwards";
                    setTimeout(() => {
                        if (document.body.contains(smellyCatOverlay)) {
                            document.body.removeChild(smellyCatOverlay);
                        }
                        showFriendsTypingEffect();
                    }, 500);
                });
            }

            function showFriendsTypingEffect() {
                console.log(" Starting Friends typing effect");

                // Create fullscreen overlay for typing effect
                const typingOverlay = document.createElement("div");
                typingOverlay.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100vw;
                    height: 100vh;
                    background: #000;
                    z-index: 25000;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    animation: fadeIn 1s ease-out;
                `;

                const typingText = document.createElement("div");
                typingText.style.cssText = `
                    text-align: center;
                    font-family: 'Gabriel Weiss Friends Font', 'Trebuchet MS', 'Arial Black', 'Helvetica', sans-serif;
                    font-weight: 900;
                    color: #feebea;
                    text-shadow:
                        0 0 20px rgba(254, 235, 234, 0.8),
                        0 0 40px rgba(254, 235, 234, 0.6),
                        0 0 80px rgba(254, 235, 234, 0.4),
                        0 0 120px rgba(254, 235, 234, 0.2);
                    line-height: 1;
                    animation: glow 2s ease-in-out infinite alternate;
                    padding: 1rem;
                    box-sizing: border-box;
                    width: 100%;
                    display: flex;
                    flex-direction: row;
                    align-items: center;
                    justify-content: center;
                    min-height: 100vh;
                    flex-wrap: nowrap;
                `;

                // Adjust font size for different screen sizes
                const screenWidth = window.innerWidth;
                let fontSize, letterSpacing;

                if (screenWidth < 480) {
                    fontSize = "3rem";
                    letterSpacing = "0.3rem";
                } else if (screenWidth < 768) {
                    fontSize = "5rem";
                    letterSpacing = "0.5rem";
                } else if (screenWidth < 1024) {
                    fontSize = "6rem";
                    letterSpacing = "0.6rem";
                } else {
                    fontSize = "8rem";
                    letterSpacing = "0.8rem";
                }

                typingText.style.fontSize = fontSize;
                typingText.style.letterSpacing = letterSpacing;
                typingText.style.gap = "0.2em";

                // Add background glow effect
                const backgroundGlow = document.createElement("div");
                backgroundGlow.style.cssText = `
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    width: 80vw;
                    height: 40vh;
                    background: radial-gradient(ellipse, rgba(254, 235, 234, 0.1) 0%, transparent 70%);
                    filter: blur(50px);
                    z-index: -1;
                    animation: glowPulse 3s ease-in-out infinite alternate;
                `;

                // Add CSS for background glow animation
                if (!document.getElementById("glowPulseStyle")) {
                    const glowStyle = document.createElement("style");
                    glowStyle.id = "glowPulseStyle";
                    glowStyle.textContent = `
                        @keyframes glowPulse {
                            0% { opacity: 0.3; transform: translate(-50%, -50%) scale(1); }
                            100% { opacity: 0.8; transform: translate(-50%, -50%) scale(1.2); }
                        }
                    `;
                    document.head.appendChild(glowStyle);
                }

                typingOverlay.appendChild(backgroundGlow);
                typingOverlay.appendChild(typingText);
                document.body.appendChild(typingOverlay);

                // Type FRIENDS with colored dots
                const letters = [
                    { char: "F", color: "#feebea" },
                    { char: "", color: "rgb(181, 48, 44)" },
                    { char: "R", color: "#feebea" },
                    { char: "", color: "rgb(102, 186, 229)" },
                    { char: "I", color: "#feebea" },
                    { char: "", color: "rgb(247, 230, 83)" },
                    { char: "E", color: "#feebea" },
                    { char: "", color: "rgb(181, 48, 44)" },
                    { char: "N", color: "#feebea" },
                    { char: "", color: "rgb(247, 230, 83)" },
                    { char: "D", color: "#feebea" },
                    { char: "", color: "rgb(102, 186, 229)" },
                    { char: "S", color: "#feebea" },
                ];
                let letterIndex = 0;

                const typeInterval = setInterval(() => {
                    if (letterIndex < letters.length) {
                        const letterElement = document.createElement("span");
                        letterElement.textContent = letters[letterIndex].char;
                        letterElement.style.cssText = `
                            color: ${letters[letterIndex].color};
                            display: inline-block;
                            font-weight: 900;
                            margin: 0 ${letters[letterIndex].char === "" ? "0.1em" : "0.05em"};
                            text-shadow: ${
                                letters[letterIndex].char === ""
                                    ? `0 0 20px ${letters[letterIndex].color}, 0 0 40px ${letters[letterIndex].color}, 0 0 60px ${letters[letterIndex].color}`
                                    : `0 0 15px rgba(254, 235, 234, 0.8), 0 0 30px rgba(254, 235, 234, 0.6), 0 0 45px rgba(254, 235, 234, 0.4)`
                            };
                            animation: letterPop 0.5s ease-out, letterGlow 2s ease-in-out infinite alternate;
                            transform-origin: center bottom;
                            position: relative;
                        `;

                        // Add CSS animations for letter effects
                        if (!document.getElementById("letterPopStyle")) {
                            const style = document.createElement("style");
                            style.id = "letterPopStyle";
                            style.textContent = `
                                @keyframes letterPop {
                                    0% { transform: scale(0) translateY(50px) rotateY(180deg); opacity: 0; }
                                    50% { transform: scale(1.3) translateY(-15px) rotateY(0deg); opacity: 1; }
                                    100% { transform: scale(1) translateY(0) rotateY(0deg); opacity: 1; }
                                }
                                @keyframes letterGlow {
                                    0% { filter: brightness(1) saturate(1); }
                                    100% { filter: brightness(1.3) saturate(1.5); }
                                }
                            `;
                            document.head.appendChild(style);
                        }

                        // Add subtle particle effect for dots
                        if (letters[letterIndex].char === "") {
                            setTimeout(() => {
                                for (let i = 0; i < 3; i++) {
                                    const particle =
                                        document.createElement("div");
                                    particle.style.cssText = `
                                        position: absolute;
                                        width: 4px;
                                        height: 4px;
                                        background: ${letters[letterIndex].color};
                                        border-radius: 50%;
                                        pointer-events: none;
                                        z-index: 1000;
                                        animation: particleFloat 2s ease-out forwards;
                                    `;

                                    const rect =
                                        letterElement.getBoundingClientRect();
                                    particle.style.left =
                                        rect.left +
                                        rect.width / 2 +
                                        (Math.random() - 0.5) * 20 +
                                        "px";
                                    particle.style.top =
                                        rect.top + rect.height / 2 + "px";

                                    document.body.appendChild(particle);

                                    setTimeout(() => {
                                        if (document.body.contains(particle)) {
                                            document.body.removeChild(particle);
                                        }
                                    }, 2000);
                                }

                                // Add particle animation if not exists
                                if (!document.getElementById("particleStyle")) {
                                    const particleStyle =
                                        document.createElement("style");
                                    particleStyle.id = "particleStyle";
                                    particleStyle.textContent = `
                                        @keyframes particleFloat {
                                            0% { transform: translateY(0) scale(1); opacity: 1; }
                                            100% { transform: translateY(-100px) scale(0); opacity: 0; }
                                        }
                                    `;
                                    document.head.appendChild(particleStyle);
                                }
                            }, 100);
                        }

                        typingText.appendChild(letterElement);
                        letterIndex++;
                    } else {
                        clearInterval(typeInterval);

                        // Keep for 3 seconds then fade out
                        setTimeout(() => {
                            typingOverlay.style.transition =
                                "opacity 2s ease-out";
                            typingOverlay.style.opacity = "0";

                            setTimeout(() => {
                                if (document.body.contains(typingOverlay)) {
                                    document.body.removeChild(typingOverlay);
                                }
                            }, 2000);
                        }, 3000);
                    }
                }, 300);

                // Click to dismiss after typing is complete
                setTimeout(
                    () => {
                        typingOverlay.addEventListener("click", () => {
                            typingOverlay.style.transition =
                                "opacity 1s ease-out";
                            typingOverlay.style.opacity = "0";
                            setTimeout(() => {
                                if (document.body.contains(typingOverlay)) {
                                    document.body.removeChild(typingOverlay);
                                }
                            }, 1000);
                        });
                    },
                    letters.length * 300 + 2000,
                );
            }

            function playAudio(filename) {
                console.log(" Playing audio:", filename);

                // Try multiple possible paths, prioritizing phoebe folder
                const paths = [
                    `./phoebe/${filename}`,
                    `phoebe/${filename}`,
                    `./audio/${filename}`,
                    `audio/${filename}`,
                    filename,
                ];

                let currentPathIndex = 0;

                function tryNextPath() {
                    if (currentPathIndex >= paths.length) {
                        console.error(
                            " All audio paths failed for:",
                            filename,
                        );
                        return;
                    }

                    const currentPath = paths[currentPathIndex];
                    console.log(
                        ` Trying path ${currentPathIndex + 1}:`,
                        currentPath,
                    );

                    const audio = new Audio(currentPath);

                    audio.addEventListener("canplay", () => {
                        console.log(" Audio ready to play:", currentPath);
                    });

                    audio.addEventListener("ended", () => {
                        console.log(" Audio finished playing:", currentPath);
                    });

                    audio
                        .play()
                        .then(() => {
                            console.log(
                                " Audio playing successfully:",
                                currentPath,
                            );
                        })
                        .catch((error) => {
                            console.warn(
                                ` Path ${currentPathIndex + 1} failed:`,
                                error.message,
                            );
                            currentPathIndex++;
                            tryNextPath();
                        });
                }

                tryNextPath();
            }

            function showEasterEggNotification(message) {
                const notification = document.createElement("div");
                const animationType = Math.floor(Math.random() * 8);
                let animationCSS = "";
                let positionCSS = "";

                // Generate random positions
                const positions = [
                    { top: "20%", left: "20%" },
                    { top: "20%", right: "20%" },
                    { top: "70%", left: "20%" },
                    { top: "70%", right: "20%" },
                    { top: "50%", left: "10%" },
                    { top: "50%", right: "10%" },
                    { top: "30%", left: "50%", transform: "translateX(-50%)" },
                    { top: "60%", left: "50%", transform: "translateX(-50%)" },
                ];

                const randomPosition =
                    positions[Math.floor(Math.random() * positions.length)];

                // Build position CSS
                if (randomPosition.top)
                    positionCSS += `top: ${randomPosition.top}; `;
                if (randomPosition.left)
                    positionCSS += `left: ${randomPosition.left}; `;
                if (randomPosition.right)
                    positionCSS += `right: ${randomPosition.right}; `;
                if (randomPosition.transform)
                    positionCSS += `transform: ${randomPosition.transform}; `;

                switch (animationType) {
                    case 0:
                        animationCSS = `
                            @keyframes fallFromLeft {
                                0% { transform: translateX(-100vw) translateY(-50px) scale(0); opacity: 0; }
                                20% { transform: translateX(0) translateY(0) scale(1.1); opacity: 1; }
                                80% { opacity: 1; transform: scale(1); }
                                100% { transform: translateX(100vw) scale(0); opacity: 0; }
                            }
                            animation: fallFromLeft 4s ease-out forwards;
                        `;
                        break;
                    case 1:
                        animationCSS = `
                            @keyframes bounceIn {
                                0% { transform: scale(0) rotate(0deg); opacity: 0; }
                                50% { transform: scale(1.3) rotate(180deg); opacity: 1; }
                                70% { transform: scale(0.9) rotate(270deg); opacity: 1; }
                                100% { transform: scale(1) rotate(360deg); opacity: 1; }
                            }
                            animation: bounceIn 2s ease-out forwards, fadeOut 2s ease-out 2s forwards;
                        `;
                        break;
                    case 2:
                        animationCSS = `
                            @keyframes slideUp {
                                0% { transform: translateY(100vh) scale(0.5); opacity: 0; }
                                20% { opacity: 1; transform: translateY(0) scale(1.1); }
                                80% { opacity: 1; transform: scale(1); }
                                100% { transform: translateY(-100vh) scale(0.5); opacity: 0; }
                            }
                            animation: slideUp 4s ease-out forwards;
                        `;
                        break;
                    case 3:
                        animationCSS = `
                            @keyframes spiral {
                                0% { transform: scale(0) rotate(0deg); opacity: 0; }
                                25% { transform: scale(1) rotate(90deg) translateX(50px); opacity: 1; }
                                50% { transform: scale(1.2) rotate(180deg) translateX(0); opacity: 1; }
                                75% { transform: scale(1) rotate(270deg) translateX(-50px); opacity: 1; }
                                100% { transform: scale(0) rotate(360deg); opacity: 0; }
                            }
                            animation: spiral 3s ease-out forwards;
                        `;
                        break;
                    case 4:
                        animationCSS = `
                            @keyframes zigzag {
                                0% { transform: translateX(-200px) translateY(-100px) scale(0); opacity: 0; }
                                25% { transform: translateX(100px) translateY(50px) scale(1); opacity: 1; }
                                50% { transform: translateX(-50px) translateY(-30px) scale(1.1); opacity: 1; }
                                75% { transform: translateX(80px) translateY(20px) scale(0.9); opacity: 1; }
                                100% { transform: translateX(300px) translateY(-200px) scale(0); opacity: 0; }
                            }
                            animation: zigzag 3.5s ease-in-out forwards;
                        `;
                        break;
                    case 5:
                        animationCSS = `
                            @keyframes pulse {
                                0% { transform: scale(0); opacity: 0; }
                                20% { transform: scale(1.2); opacity: 1; }
                                40% { transform: scale(0.8); opacity: 1; }
                                60% { transform: scale(1.1); opacity: 1; }
                                80% { transform: scale(0.9); opacity: 1; }
                                100% { transform: scale(1); opacity: 1; }
                            }
                            animation: pulse 1.5s ease-out forwards, fadeOut 2s ease-out 2s forwards;
                        `;
                        break;
                    case 6:
                        animationCSS = `
                            @keyframes flyIn {
                                0% { transform: translateX(100vw) translateY(-100vh) rotate(0deg) scale(0.3); opacity: 0; }
                                30% { transform: translateX(0) translateY(0) rotate(180deg) scale(1.2); opacity: 1; }
                                70% { transform: rotate(360deg) scale(1); opacity: 1; }
                                100% { transform: translateX(-100vw) translateY(100vh) rotate(720deg) scale(0.3); opacity: 0; }
                            }
                            animation: flyIn 4.5s ease-in-out forwards;
                        `;
                        break;
                    case 7:
                        animationCSS = `
                            @keyframes wave {
                                0% { transform: translateY(50px) scale(0); opacity: 0; }
                                25% { transform: translateY(-20px) scale(1); opacity: 1; }
                                50% { transform: translateY(10px) scale(1.1); opacity: 1; }
                                75% { transform: translateY(-5px) scale(0.9); opacity: 1; }
                                100% { transform: translateY(0) scale(1); opacity: 1; }
                            }
                            animation: wave 1.8s ease-out forwards, fadeOut 2s ease-out 2.5s forwards;
                        `;
                        break;
                }

                notification.innerHTML = `
                    <style>
                        ${animationCSS}
                        @keyframes fadeOut {
                            0% { opacity: 1; }
                            100% { opacity: 0; }
                        }
                    </style>
                `;

                notification.style.cssText = `
                    position: fixed;
                    ${positionCSS}
                    background: linear-gradient(45deg, rgba(254, 235, 234, 0.95), rgba(255, 255, 255, 0.95));
                    color: #333;
                    padding: 1.5rem 2.5rem;
                    border-radius: 20px;
                    font-family: "Dancing Script", cursive;
                    font-size: 1.3rem;
                    font-weight: bold;
                    text-align: center;
                    z-index: 10000;
                    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
                    border: 2px solid rgba(254, 235, 234, 0.8);
                    backdrop-filter: blur(10px);
                    max-width: 300px;
                    word-wrap: break-word;
                    pointer-events: none;
                `;

                notification.textContent = message;
                document.body.appendChild(notification);

                // Remove after animation
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 5000);
            }

            // Keyboard listener for "you" input
            document.addEventListener("keydown", function (e) {
                if (isListeningForYou) {
                    const key = e.key.toLowerCase();
                    keySequence.push(key);

                    // Keep only last 3 characters
                    if (keySequence.length > 3) {
                        keySequence.shift();
                    }

                    // Check if "you" was typed
                    if (keySequence.join("") === "you") {
                        console.log(
                            "User typed 'you'! Triggering final Friends easter egg!",
                        );
                        clearTimeout(whoSingingTimer);
                        isListeningForYou = false;
                        keySequence = [];
                        triggerFinalFriendsEasterEgg();
                    } else {
                        console.log(
                            "Current key sequence:",
                            keySequence.join(""),
                        );
                    }
                }
            });

            // Keyboard listener for "rickrickrick" and "picklerick" input
            document.addEventListener("keydown", function (e) {
                const key = e.key.toLowerCase();

                // Handle Rick portal sequence
                rickKeySequence.push(key);

                // Keep only last 12 characters for "rickrickrick"
                if (rickKeySequence.length > 12) {
                    rickKeySequence.shift();
                }

                // Check if "rickrickrick" was typed and not already triggered
                if (
                    rickKeySequence.join("") === "rickrickrick" &&
                    !rickPortalTriggered
                ) {
                    console.log(
                        " User typed 'rickrickrick'! Triggering Rick Portal!",
                    );
                    rickKeySequence = [];
                    rickPortalTriggered = true;
                    triggerRickPortal();
                } else {
                    console.log(
                        "Current rick sequence:",
                        rickKeySequence.join(""),
                    );
                }

                // Handle Pickle Rick sequence
                pickleRickKeySequence.push(key);

                // Keep only last 10 characters for "picklerick"
                if (pickleRickKeySequence.length > 10) {
                    pickleRickKeySequence.shift();
                }

                // Check if "picklerick" was typed and not already triggered
                if (
                    pickleRickKeySequence.join("") === "picklerick" &&
                    !pickleRickTriggered
                ) {
                    console.log(
                        " User typed 'picklerick'! Triggering Pickle Rick!",
                    );
                    pickleRickKeySequence = [];
                    pickleRickTriggered = true;
                    triggerPickleRick();
                } else {
                    console.log(
                        "Current pickle rick sequence:",
                        pickleRickKeySequence.join(""),
                    );
                }

                // Reset sequences after 5 seconds of inactivity
                if (rickKeyTimer) {
                    clearTimeout(rickKeyTimer);
                }
                rickKeyTimer = setTimeout(() => {
                    rickKeySequence = [];
                    pickleRickKeySequence = [];
                    console.log("Key sequences reset due to timeout");
                }, 5000);
            });

            function triggerFinalFriendsEasterEgg() {
                console.log(
                    " Triggering final Friends easter egg after 'you' input!",
                );
                // This triggers when user types "you" after "Who's singing?"
                // First show Smelly Cat content, then Friends typing effect
                showSmellyCatContent();
            }

            // Initialize easter egg system on page load
            window.addEventListener("load", function () {
                console.log(" New Phoebe Easter Egg System Loaded!");
                console.log(
                    " Try triple-clicking various elements to discover easter eggs!",
                );
                console.log(
                    " Easter egg counters initialized:",
                    clickCounters,
                );
                console.log(" Easter egg states:", easterEggTriggered);

                // Check if elements exist
                const pengElements = document.querySelectorAll(".final-text");
                console.log(` Found ${pengElements.length} Peng elements`);

                const tributeElements = document.querySelectorAll(".tribute");
                console.log(
                    ` Found ${tributeElements.length} tribute elements`,
                );

                const essenceCards = document.querySelectorAll(".essence-card");
                console.log(` Found ${essenceCards.length} essence cards`);

                const phoebeTitles = document.querySelectorAll(".phoebe-title");
                console.log(` Found ${phoebeTitles.length} phoebe titles`);

                const colorCircle = document.querySelector(".color-circle");
                console.log(
                    ` Found color circle:`,
                    colorCircle ? "Yes" : "No",
                );

                // Check if easter egg system was already initialized
                console.log(
                    " Easter egg events initialized:",
                    easterEggEventsInitialized,
                );
                console.log(
                    " Color circle event count:",
                    colorCircleEventCount,
                );

                // Only initialize if not already done
                if (!window.easterEggSystemInitialized) {
                    console.log(
                        " Re-initializing easter egg events from load handler...",
                    );
                    initializeEasterEggEvents();
                }
            });

            function splitTextIntoLetters(element) {
                const text = element.textContent;
                if (!text || text.trim() === "") return;

                const letters = text.split("").map((char) => {
                    const span = document.createElement("span");
                    span.className = "letter-particle";
                    span.textContent = char === " " ? "\u00A0" : char; // Use non-breaking space
                    span.style.cssText = `
                        display: inline-block;
                        will-change: transform, opacity, filter;
                        transform-origin: center center;
                        backface-visibility: hidden;
                        transform: translateZ(0);
                    `;
                    return span;
                });

                // Clear original content and add letter spans
                element.textContent = "";
                letters.forEach((letter) => element.appendChild(letter));
            }

            function triggerRickPortal() {
                console.log(" RICK PORTAL ACTIVATED! WUBBA LUBBA DUB DUB!");

                // Create portal at screen center, slightly above middle
                const portal = document.createElement("div");
                portal.className = "rick-portal";
                portal.style.left = "50%";
                portal.style.top = "45%"; // Slightly above center (was 50%)
                portal.style.transform = "translate(-50%, -50%)";
                portal.innerHTML = `
                    <img src="./phoebe/rickandmorty.png" alt="Rick Portal" />
                    <div class="rick-message" id="rickMessage"></div>
                `;

                document.body.appendChild(portal);

                setTimeout(() => {
                    portal.classList.add("show");
                }, 100);

                setTimeout(() => {
                    typeMessage(
                        "WUBBA LUBBA DUB DUB!",
                        document.getElementById("rickMessage"),
                        () => {
                            // Play audio after typing completes
                            playAudio("wubba-lubba.mp3");
                        },
                    );
                }, 2000);

                setTimeout(() => {
                    startAdvancedSuckingEffect();
                }, 8000); // Start sucking effect during portal expansion phase
            }

            function typeMessage(text, element, callback) {
                let index = 0;
                element.textContent = "";

                function typeChar() {
                    if (index < text.length) {
                        element.textContent += text.charAt(index);
                        index++;
                        setTimeout(typeChar, 100 + Math.random() * 100);
                    } else if (callback) {
                        // Call callback after typing is complete
                        setTimeout(callback, 500);
                    }
                }
                typeChar();
            }

            function startAdvancedSuckingEffect() {
                // Get portal position (screen center, slightly above middle)
                const portalCenterX = window.innerWidth / 2;
                const portalCenterY = window.innerHeight * 0.45; // Match portal position

                // Split all text elements into letters first
                const textElements = document.querySelectorAll(
                    "h1, h2, h3, h4, h5, h6, p, span:not(.letter-particle):not(.rick-portal *), div:not(.rick-portal):not(.rick-portal *):not(.final-background), a, button, label, li, td, th, blockquote, em, strong, i, b, u, small, code, pre",
                );

                textElements.forEach((element) => {
                    if (
                        element.textContent.trim() &&
                        !element.querySelector(".letter-particle") &&
                        !element.closest(".rick-portal") &&
                        element.children.length === 0 // Only split leaf text elements
                    ) {
                        splitTextIntoLetters(element);
                    }
                });

                // Get all letters and calculate distances from portal center
                const letters = Array.from(
                    document.querySelectorAll(".letter-particle"),
                );
                const letterDistances = letters.map((letter) => {
                    const rect = letter.getBoundingClientRect();
                    const letterCenterX = rect.left + rect.width / 2;
                    const letterCenterY = rect.top + rect.height / 2;
                    const distance = Math.sqrt(
                        Math.pow(portalCenterX - letterCenterX, 2) +
                            Math.pow(portalCenterY - letterCenterY, 2),
                    );
                    return {
                        element: letter,
                        distance,
                        x: letterCenterX,
                        y: letterCenterY,
                    };
                });

                // Sort by distance (nearest first)
                letterDistances.sort((a, b) => a.distance - b.distance);

                // Animate letters with progressive acceleration based on distance
                letterDistances.forEach((letterData, index) => {
                    const letter = letterData.element;
                    const dx = portalCenterX - letterData.x;
                    const dy = portalCenterY - letterData.y;
                    const distance = letterData.distance;

                    // Distance-based timing: closer letters start sooner, but much slower progression
                    const distanceRatio =
                        distance /
                        Math.max(...letterDistances.map((l) => l.distance));
                    const baseDelay = distanceRatio * 1500; // Slower start, max 1500ms delay

                    // Slow start with gradual acceleration
                    const progressRatio = index / letterDistances.length;
                    const accelerationFactor = 0.3 + progressRatio * 1.2; // Start very slow
                    const baseDuration = 5; // Longer base duration for slower effect
                    const duration = Math.max(
                        2,
                        baseDuration / accelerationFactor,
                    );

                    // Distance-based rotation intensity - gentler at start
                    const rotationIntensity = 0.3 + distanceRatio * 1.2;
                    const rotation =
                        (Math.random() * 2 - 1) * rotationIntensity;

                    // Apply optimized styles
                    letter.style.cssText += `
                        --dx: ${dx}px;
                        --dy: ${dy}px;
                        --rotation: ${rotation};
                        --duration: ${duration}s;
                        --delay: ${baseDelay}ms;
                    `;

                    setTimeout(() => {
                        letter.classList.add("letter-exploding");
                    }, baseDelay);
                });

                // Get other elements and sort by distance
                const otherElements = Array.from(
                    document.querySelectorAll(
                        "div:not(.rick-portal):not(.rick-portal *):not(.final-background), img:not(.rick-portal *), svg:not(.rick-portal *), canvas:not(.rick-portal *), video:not(.rick-portal *), audio:not(.rick-portal *), input:not(.rick-portal *), textarea:not(.rick-portal *), select:not(.rick-portal *), form:not(.rick-portal *), table:not(.rick-portal *), section:not(.rick-portal *), article:not(.rick-portal *), aside:not(.rick-portal *), nav:not(.rick-portal *), header:not(.rick-portal *), footer:not(.rick-portal *), main:not(.rick-portal *)",
                    ),
                );

                const elementDistances = otherElements
                    .filter((element) => {
                        // Include elements that have letter particles (already processed text elements)
                        // or elements that are visible and have some content
                        const hasLetterParticles =
                            element.querySelector(".letter-particle");
                        const hasVisibleContent =
                            element.offsetWidth > 0 && element.offsetHeight > 0;
                        const isNotBodyOrHtml =
                            element.tagName !== "BODY" &&
                            element.tagName !== "HTML";
                        const isNotScript =
                            element.tagName !== "SCRIPT" &&
                            element.tagName !== "STYLE";

                        return (
                            (hasLetterParticles || hasVisibleContent) &&
                            isNotBodyOrHtml &&
                            isNotScript
                        );
                    })
                    .map((element) => {
                        const rect = element.getBoundingClientRect();
                        const elementCenterX = rect.left + rect.width / 2;
                        const elementCenterY = rect.top + rect.height / 2;
                        const distance = Math.sqrt(
                            Math.pow(portalCenterX - elementCenterX, 2) +
                                Math.pow(portalCenterY - elementCenterY, 2),
                        );
                        return {
                            element,
                            distance,
                            x: elementCenterX,
                            y: elementCenterY,
                        };
                    });

                // Sort elements by distance (nearest first)
                elementDistances.sort((a, b) => a.distance - b.distance);

                // Animate elements with distance-based timing and 3D effects
                elementDistances.forEach((elementData, index) => {
                    const element = elementData.element;
                    const dx = portalCenterX - elementData.x;
                    const dy = portalCenterY - elementData.y;
                    const distance = elementData.distance;

                    // Elements start after letters finish (around 3-6 seconds)
                    const distanceRatio =
                        distance /
                        Math.max(...elementDistances.map((e) => e.distance));
                    const letterFinishTime = 4000; // Wait for letters to mostly finish
                    const baseDelay = letterFinishTime + distanceRatio * 800; // Start after letters

                    // Slower, more dramatic element animation
                    const accelerationFactor = 0.8 + (1 - distanceRatio) * 1;
                    const baseDuration = 4.5; // Longer duration for element warping
                    const duration = Math.max(
                        3,
                        baseDuration / accelerationFactor,
                    );

                    // Moderate rotation for smooth border warping
                    const rotationIntensity = 0.8 + distanceRatio * 1.5;
                    const rotation =
                        (Math.random() * 2 - 1) * rotationIntensity;

                    // Apply performance optimized styles for border warping
                    element.style.cssText += `
                        will-change: transform, opacity, border-radius, clip-path, filter;
                        transform-origin: center center;
                        backface-visibility: hidden;
                        --dx: ${dx}px;
                        --dy: ${dy}px;
                        --rotation: ${rotation};
                        --duration: ${duration}s;
                        --delay: ${baseDelay}ms;
                    `;

                    setTimeout(() => {
                        element.classList.add("element-sucking");
                    }, baseDelay);
                });

                // Show final background after all elements are absorbed (much longer timing)
                setTimeout(() => {
                    // Hide scrollbars
                    document.body.classList.add("portal-mode");
                    document.documentElement.classList.add("portal-mode");

                    const finalBg = document.createElement("div");
                    finalBg.className = "final-background";
                    document.body.appendChild(finalBg);

                    setTimeout(() => {
                        finalBg.classList.add("show");
                    }, 200);

                    setTimeout(() => {
                        if (document.querySelector(".rick-portal")) {
                            document.querySelector(".rick-portal").remove();
                        }
                    }, 21000); // Remove portal after animation completes (20s + 1s buffer)
                }, 22000); // Extended total duration to accommodate 20s portal animation
            }

            function triggerPickleRick() {
                console.log(" PICKLE RICK ACTIVATED!");

                // First show central text display
                showPickleRickText();

                // Then create persistent Pickle Rick in bottom left after delay
                setTimeout(() => {
                    createPersistentPickleRick();
                }, 3000);
            }

            function showPickleRickText() {
                // Create fullscreen overlay for Pickle Rick text
                const overlay = document.createElement("div");
                overlay.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100vw;
                    height: 100vh;
                    background: rgba(0, 0, 0, 0.8);
                    z-index: 15000;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    animation: fadeIn 0.5s ease-out;
                `;

                // Create the main text element
                const textElement = document.createElement("div");
                const isMobile = window.innerWidth <= 768;
                textElement.style.cssText = `
                    font-family: Arial Black, sans-serif;
                    font-size: ${isMobile ? "clamp(2rem, 12vw, 4rem)" : "clamp(3rem, 8vw, 8rem)"};
                    font-weight: 900;
                    color: #4CAF50;
                    text-align: center;
                    text-transform: uppercase;
                    letter-spacing: ${isMobile ? "0.05em" : "0.1em"};
                    transform: rotate(-8deg) skew(-5deg, 0deg);
                    text-shadow:
                        ${isMobile ? "2px 2px 0px #2E7D32, 4px 4px 0px #1B5E20, 6px 6px 0px #0D4E14, 8px 8px 15px rgba(0,0,0,0.4)" : "4px 4px 0px #2E7D32, 8px 8px 0px #1B5E20, 12px 12px 0px #0D4E14, 16px 16px 20px rgba(0,0,0,0.4)"};
                    background: linear-gradient(45deg, #66BB6A 0%, #4CAF50 50%, #388E3C 100%);
                    -webkit-background-clip: text;
                    -webkit-text-fill-color: transparent;
                    background-clip: text;
                    animation: pickleTextGlow 2s ease-in-out infinite alternate;
                    position: relative;
                    padding: ${isMobile ? "10px" : "20px"};
                `;
                textElement.textContent = "I'M PICKLE RICK!";

                // Add background decoration with diagonal stripes
                const decoration = document.createElement("div");
                decoration.style.cssText = `
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%) rotate(-8deg);
                    width: 120%;
                    height: 150%;
                    background:
                        repeating-linear-gradient(
                            45deg,
                            rgba(76, 175, 80, 0.8) 0px,
                            rgba(76, 175, 80, 0.8) ${isMobile ? "10px" : "15px"},
                            rgba(129, 199, 132, 0.6) ${isMobile ? "10px" : "15px"},
                            rgba(129, 199, 132, 0.6) ${isMobile ? "20px" : "30px"},
                            rgba(46, 125, 50, 0.7) ${isMobile ? "20px" : "30px"},
                            rgba(46, 125, 50, 0.7) ${isMobile ? "30px" : "45px"}
                        ),
                        linear-gradient(135deg,
                            rgba(76, 175, 80, 0.2) 0%,
                            rgba(129, 199, 132, 0.3) 50%,
                            rgba(46, 125, 50, 0.2) 100%);
                    border: ${isMobile ? "4px" : "6px"} solid #4CAF50;
                    border-radius: ${isMobile ? "15px" : "25px"};
                    z-index: -1;
                    box-shadow:
                        0 0 40px rgba(76, 175, 80, 0.6),
                        inset 0 0 40px rgba(76, 175, 80, 0.2),
                        0 0 80px rgba(76, 175, 80, 0.3);
                `;

                // Add diagonal accent stripes
                for (let i = 0; i < 4; i++) {
                    const stripe = document.createElement("div");
                    stripe.style.cssText = `
                        position: absolute;
                        top: ${-20 + i * 25}%;
                        left: ${-30 + i * 20}%;
                        width: 200%;
                        height: ${isMobile ? "5px" : "8px"};
                        background: linear-gradient(90deg,
                            transparent 0%,
                            rgba(76, 175, 80, 0.8) 20%,
                            rgba(129, 199, 132, 1) 50%,
                            rgba(76, 175, 80, 0.8) 80%,
                            transparent 100%);
                        transform: rotate(${-15 + i * 5}deg);
                        z-index: -1;
                        animation: stripeGlow ${1.5 + i * 0.3}s ease-in-out infinite alternate;
                    `;
                    decoration.appendChild(stripe);
                }

                // Add CSS for the glow and stripe animations
                if (!document.getElementById("pickleTextGlowStyle")) {
                    const glowStyle = document.createElement("style");
                    glowStyle.id = "pickleTextGlowStyle";
                    glowStyle.textContent = `
                        @keyframes pickleTextGlow {
                            0% {
                                filter: brightness(1) drop-shadow(0 0 10px rgba(76, 175, 80, 0.5));
                                transform: rotate(-8deg) skew(-5deg, 0deg) scale(1);
                            }
                            100% {
                                filter: brightness(1.2) drop-shadow(0 0 25px rgba(76, 175, 80, 0.8));
                                transform: rotate(-8deg) skew(-5deg, 0deg) scale(1.02);
                            }
                        }
                        @keyframes stripeGlow {
                            0% {
                                opacity: 0.6;
                                transform: rotate(var(--rotation, 0deg)) scaleX(0.8);
                            }
                            100% {
                                opacity: 1;
                                transform: rotate(var(--rotation, 0deg)) scaleX(1.2);
                            }
                        }
                    `;
                    document.head.appendChild(glowStyle);
                }

                textElement.appendChild(decoration);
                overlay.appendChild(textElement);
                document.body.appendChild(overlay);

                // Play audio immediately
                playAudio("picklerick.mp3");

                // Remove after 2.5 seconds with fade out
                setTimeout(() => {
                    overlay.style.animation = "fadeOut 0.5s ease-out forwards";
                    setTimeout(() => {
                        if (document.body.contains(overlay)) {
                            document.body.removeChild(overlay);
                        }
                    }, 500);
                }, 2500);
            }

            function createPersistentPickleRick() {
                // Create persistent Pickle Rick in bottom left
                const pickleRick = document.createElement("div");
                pickleRick.id = "pickle-rick";
                pickleRick.style.cssText = `
                    position: fixed;
                    bottom: 20px;
                    left: 20px;
                    width: 80px;
                    height: 80px;
                    z-index: 10000;
                    cursor: pointer;
                    transition: transform 0.3s ease;
                `;

                const pickleImg = document.createElement("img");
                pickleImg.src = "./phoebe/picklerick.png";
                pickleImg.alt = "Pickle Rick";
                pickleImg.style.cssText = `
                    width: 100%;
                    height: 100%;
                    object-fit: contain;
                `;

                pickleRick.appendChild(pickleImg);
                document.body.appendChild(pickleRick);

                // Add hover effect
                pickleRick.addEventListener("mouseenter", () => {
                    pickleRick.style.transform = "scale(1.1) rotate(5deg)";
                });

                pickleRick.addEventListener("mouseleave", () => {
                    pickleRick.style.transform = "scale(1) rotate(0deg)";
                });

                // Add click to play audio
                pickleRick.addEventListener("click", () => {
                    console.log(" Pickle Rick clicked!");
                    pickleRick.style.transform = "scale(0.95) rotate(-5deg)";
                    setTimeout(() => {
                        pickleRick.style.transform = "scale(1.1) rotate(5deg)";
                    }, 150);
                    playAudio("picklerick.mp3");
                });

                // Audio is already played in showPickleRickText()
            }
        </script>

        <!-- Cyberpunk 2077 Easter Egg -->
        <div id="cyberpunkEasterEgg" class="cyberpunk-easter-egg">
            <div class="cyberpunk-content">
                <div class="broken-heart"></div>
                <div class="cyberpunk-text">808</div>
            </div>
        </div>

        <!-- Audio Control Panel -->
        <div id="audioControlPanel" class="audio-control-panel">
            <button id="audioControlBtn" class="audio-control-btn"></button>
            <div class="audio-status">PAUSED</div>
        </div>

        <!-- Hidden Audio Element -->
        <audio id="cyberpunkAudio" loop preload="auto">
            <source src="https://eta.vgmtreasurechest.com/soundtracks/cyberpunk-2077-radio-vol.-2-original-soundtrack/liojiacuhf/05.%20I%20Really%20Want%20to%20Stay%20at%20Your%20House.mp3" type="audio/mpeg">
        </audio>

        <!-- Debug Panel -->
        <button id="debugToggle" class="debug-toggle"> Debug</button>
        <div id="debugPanel" class="debug-panel">
            <h4> Easter Egg Debug</h4>
            <p><strong>Target:</strong> All 3 cards show:<br/>
            "" ()<br/>
            "You're a natural-born Edgerunner." ()</p>
            <div class="easter-egg-hint">
                 Tip: Click cards to change quotes until all 3 match!
            </div>
            <button id="autoClickBtn" class="auto-click-btn" title="Automatically click cards until all 3 show the target text"> Auto Click</button>
            <div id="currentQuotes" class="current-quotes">
                <p><strong>Current Cards:</strong></p>
                <div id="quotesList"></div>
            </div>
        </div>
    </body>
</html>
</text>
